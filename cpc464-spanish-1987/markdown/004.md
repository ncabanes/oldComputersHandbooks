Capítulo 4
Para su referencia  


Este capítulo contiene la mayor parte de la información que usted pueda
necesitar para aprender a manejar el ordenador.
Temas tratados:

*	Posiciones del cursor y códigos de control
* Interrupciones
* Caracteres ASCII y caracteres gráficos
* Esquemas del teclado
*	Sonidos
* Mensajes de error
* Palabras reservadas de BASIC
* Plantillas
*	Conexiones
* Impresoras
* Joysticks
*	Ampliaciones del sistema residentes (RSX)
*	Memoria

Para más completa información sobre BASIC y el firmware del CPC464, consúltense las
publicaciones SOFT157 y SOFT158, respectivamente.

      
 
Para su referencia ...	4/1

Parte 1: Posiciones del cursor y códigos
ampliados de control en BASIC
En ciertas aplicaciones el cursor puede encontrarse fuera de la ventana de texto. Algunas operaciones fuerzan al cursor a ocupar una posición permitida antes de poder ser llevadas a cabo. Son las siguientes:
1. Escribir un carácter.
2. Exhibir el signo del cursor (el rectángulo).
3. Obedecer los códigos de control señalados con un asterisco en la tabla siguiente. El proceso de forzar el cursor a ocupar una posición permitida consiste en lo siguiente:
1. Si el cursor está a la derecha del borde derecho de la ventana, salta al extremo izquierdo de la línea siguiente.
2. Si el cursor está a la izquierda del borde izquierdo de la ventana, salta al extremo derecho de la línea anterior.
3. Si el cursor está por encima del borde superior, el contenido de la ventana se desplaza una línea hacia abajo y el cursor aparece en la primera línea.
4. Si el cursor está por debajo del borde inferior, el contenido de la ventana se desplaza una línea hacia arriba y el cursor aparece en la última línea.
Las comprobaciones y operaciones se realizan en el orden de la lista anterior. Las posiciones ilegales del cursor pueden ser cero o negativas, es decir, a la izquierda y por encima de la ventana.
Los códigos del margen O a 31 no producen ningún símbolo cuando se los envía a la pantalla, sino que son interpretados como códigos de control (y deben ser utilizados con cuidado). Algunos de ellos alteran el significado de uno o varios de los códigos siguientes, que hacen las funciones de parámetros del código original.
Si se envía un código de control a la pantalla gráfica, su efecto es dibujar un símbolo relacionado con la función que tendría si se lo generase mediante el teclado (v. g., &07 'BEL': [CTRL G). Ejercerá su función de control si se lo envía a la pantalla mediante:
PRINT CHRS(&437) o bien PRINT "5:1"
donde el símbolo del "timbre" se obtiene pulsando CTRL G en el momento de teclear la instrucción PRINT.
Los códigos señalados con * en la lista siguiente fuerzan al cursor a ocupar una posición permitida en la ventana antes de ser obedecidos. Para cada código se da el número, en hexadecimal y en decimal, y la descripción de su función.
4/2	Para su referencia ...









                   
    




Códigos de control en BASIC

Valor	Nombre	Parámetro	Significado
&00	0	NUL		Sin efecto. Se lo ignora.
&01	1	SOH	O a 255	Escribe el símbolo correspondiente al valor
			del parámetro, lo que permite exhibir los sím-
			bolos del O al 31.
&02	2	STX		Hace invisible el cursor de texto.
&03	3	ETX		Hace visible el cursor de texto. BASIC inhibe
			el cursor en todas las situaciones, salvo cuan-
			do está esperando una entrada por el teclado.
			Tal acción automática de BASIC predomina
			sobre este código de control.
&04	4	EOT	O a 2	Establece el modo de pantalla. El paráme-
			tro se toma MOD 4. Equivale a la orden
			MODE.
&05	5	ENQ	O a 255	Envía a la posición del cursor gráfico el carác-
			ter correspondiente al valor del parámetro.
&06	6	ACK		Habilita la pantalla de texto.	(Véase &15
			NAK.)
&07	7	BEL		Produce un pitido. Obsérvese que este código
			borra las colas de sonido.
&08	8	*BS		Hace retroceder el cursor una posición.
&09	9	*TAB		Hace avanzar el cursor una posición.
&OA	10	*LF		Hace bajar el cursor una línea.
&OB	11	*VT		Hace subir el cursor una línea.
&OC	12	FF		Borra la ventana de texto y lleva el cursor al
		extremo superior izquierdo. Equivale a la or-
		den CLS.
Para su referencia ...	4/3

e e e e e
e
e e e e
e
e
e e e e e e e e e
e
e
e
e
e
Valor	Nombre	Parámetro	Significado
&OD 13	*CR	Lleva el cursor al extremo izquierdo de la línea actual.
&OE 14 SO O a 15 Establece la tinta asignada al papel. El parámetro se toma MOD 16. Equivale a la orden PAPER.
&OF 15 SI O a 15 Establece la tinta asignada a la pluma. El parámetro se toma MOD 16. Equivale a la orden PEN.
&10 16 *DLE Borra el carácter que está en la posición del cursor. Rellena la célula del carácter con el color actual del papel.
*DC1 Borra desde el extremo izquierdo de la ventana hasta la posición actual del cursor inclusive. Rellena las células afectadas con el color actual del papel.
&12 18 *DC2 Borra desde la posición actual del cursor inclusive hasta el extremo derecho de la ventana. Rellena las células afectadas con el color actual del papel.
&13 19 *DC3 Borra desde el principio de la ventana hasta la posición actual del cursor inclusive. Rellena las células afectadas con el color actual del papel.
&14 20 * DC4 Borra desde la posición actual del cursor inclusive hasta el final de la ventana. Rellena las células afectadas con el color actual del papel.
&15 21 NAK Inhibe la pantalla de texto, la cual no reacciona ante nada que se le envía mientras no reciba el código ACK (&06 6)
&16 22	SYN	O a 1	Se toma el parámetro MOD 2. Opción de transparencia: O desactiva, 1 activa.
4/4	Para su referencia ...
Valor	Nombre	Parámetro	Significado
&17	23	ETB	O a 3	Se toma el parámetro MOD 4. Establece el
			modo de tinta para gráficos:
			O	normal
			1	XOR
			2 AND
			3 OR
&18	24	CAN		Intercambia las tintas de pluma y papel.
&19	25	EM	O a 255	Define la matriz de un carácter definible por
		O a 255	el usuario. Equivale a la orden SYMBOL.
		O a 255	Lleva nueve parámetros. El primero es el nú-
		O a 255	mero del carácter; los ocho restantes, el dise-
		0 a 255	ño del carácter. El bit más significativo del
		O a 255	primer byte corresponde al punto extremo su-
		0 a 255	perior izquierdo del carácter. El bit menos sig-
		o a 255	nificativo del último byte corresponde al pun-
		O a 255	to extremo inferior derecho del caracter.
&16	26	SUB	1 a 80	Define una ventana. Equivale a la orden
		1 a 80	WINDOW. Los dos primeros parámetros es-
		1 a 25	pecifican los bordes izquierdo y derecho de la
		1 a 25	ventana; el menor de ellos se considera defini-
			torio del borde izquierdo. Los dos últimos pa-
			rámetros especifican los bordes superior e in-
			ferior de la ventana; el menor de ellos se con-
			sidera definitorio del borde superior.
&1B	27	ESC		Sin efecto. Se lo ignora.
&1C	28	FS	O a 15	Asigna dos colores a una tinta. Equivale a la
		O a 31	orden INK. El primer parámetro (MOD 16)
		O a 31	especifica el número de tinta; los dos siguien-
			tes (MOD 32), los colores deseados. (Los va-
			lores 27	a 31	no corresponden a colores
			definidos.)
&1D	29	GS	O a 31	Asigna dos colores al borde. Equivale a la or-
		o a 31	den BORDER. Los dos parámetros (MOD 32)
			especifican los colores. (Los valores 27 a 31 no
			corresponden a colores definidos.)

Para su referencia ...	4/5





  


 

            

 
 




RS
&1F 31	US	1 a 80 1 a 25
Valor
&lE 30
Nombre	Parámetro	Significado
Lleva el cursor al extremo superior izquierdo de la ventana.
Lleva el cursor a la posición especificada dentro de la ventana actual. Equivale a la orden LOCATE. El primer parámetro representa la columna; el segundo, la línea.
Parte 2: El sistema operativo
La gestión interna del CPC464 es realizada en tiempo real por un sofisticado sistema operativo. El sistema operativo es una especie de 'guardia de tráfico' que controla el flujo entre entradas y salidas.
Su función primordial es servir de intermediario (interfaz) entre BASIC y los circuitos electrónicos. Por ejemplo, cuando el programa exige que parpadeen las tintas, BASIC entrega al sistema operativo los parámetros y éste realiza el trabajo.
El sistema operativo de la máquina es lo que se suele denominar `firmware'. Es un programa grabado en ROM y comprende las rutinas en código de máquina que son invocadas por las órdenes de alto nivel de BASIC.
Si se siente tentado a modificar el contenido de posiciones de memoria (con la orden POKE) o a invocar subrutinas del sistema operativo (con CALL), grabe el programa antes de que sea demasiado tarde.
El firmware del sistema operativo del CPC464 está descrito en la publicación SOFT 158 y queda fuera del alcance de este manual.
Si usted piensa programar en código de máquina, debe proveerse de un programa ensamblador. El DEVPAC de AMSOFT incluye un ensamblador de Z80 reubicable, con editor, desensamblador y monitor.
4/6	Para su referencia .
 

  

       


  


  

 

  




Parte 3: Interrupciones
El CPC464 utiliza ampliamente las interrupciones del Z80 para proporcionar un sistema
operativo que incluye varias características multitarea, de las que son ejemplo las estructuras AFTER y EVERY descritas en otro lugar de este manual. El orden de prioridad de los
temporizadores es el siguiente:
Break (i EscIsc]) (detención del programa)
Temporizador 3
Temporizador 2 (y las tres colas de sonido)
Temporizador 1
Temporizador O
Las interrupciones sólo se deben programar después de considerar las consecuencias de los
posibles estados intermedios de las variables en el momento de la interrupción. La subruti-
na de interrupción debe evitar interacciones indeseadas con el estado de las variables del programa principal.
Las colas de sonidos tienen interrupciones independientes, de igual nivel de prioridad. Una
vez iniciada una interrupción de sonido, ya no puede ser interrumpida por otra de sonido. Este mecanismo permite que las rutinas de interrupción de sonido puedan compartir varia- ./	bles sin estar sujetas a los riesgos mencionados.
Cuando se habilita una interrupción de cola de sonido (con ON SQ GOSUB), la interrup-
ción se realiza inmediatamente si la cola de sonido del canal correspondiente no está llena; si lo está, la interrupción se producirá cuando termine el sonido actual y quede espacio libre
en la cola. La acción de la interrupción inhibe el suceso, de modo que la subrutina debe ser rehabilitada si se la va a utilizar más tarde.
 


Las acciones de enviar un sonido y de examinar el estado de la cola inhiben también la inte-
rrupción de sonido.
 

 
Para su referencia ...	4/7
Parte 4: Caracteres ASCII y caracteres
gráficos en BASIC
ASCII
En la tabla siguiente se da la relación de los códigos y caracteres ASCII. Los números están en decimal, octal y hexadecimal. En las siguientes páginas se ilustra el diseño de los caracteres generados por el CPC464.
DEC OCTAL HEX Caracteres ASCII	DEC OCTAL HEX ASCII	DEC OCTAL HEX ASCII
0	000	00	NUL (ItTnLi(1)	50	062	32	2	100	144	64	d
1	001	01	SOH (ICTFILIA)	51	063	33	3	101	145	65	e
2	002	02	STX 0CMB)	52	064	34	4	102	146	66	f
3	003	03	ETX (itTai:IC)	53	065	35	5	103	147	67	g
4	004	04	EOT (t71:WD)	54	066	36	6	104	150	68	h
5	005	05	ENQ (ti -FILIE)	55	067	37	7	105	151	69	
6	006	06	ACK ((C71:W_f)	56	070	38	8	106	152	6A	j
7	007	07	BRL (:u.1G)	57	071	39	9	107	153	6B	k
8	010	08	BS (rcTKI-1)	58	072	3A		108	154	6C	1
9	011	09	HT (URO)	59	073	3B	109	155	6D	m
10	012	0A	LF (LcTRLJ)	60	074	3C	<	110	156	6E	n
11	013	OB	VT (LcTRLIK)	61	075	3D		111	157	6E	o
12	014	OC	FF (rRilL)	62	076	3E	>	112	160	70	p
13	015	OD	CR (FáTFWM)	63	077	3F	?	113	161	71	q
14	016	OE	SO (tIrFWN)	64	100	40	@	114	162	72	r
15	017	OF	SI (LeTaLIO)	65	101	41	A	115	163	73	s
16	020	10	DLE (t11-FWP)	66	102	42	B	116	164	74	t
17	021	11	DCI ([CTRL Q)	67	103	43	C	117	165	75	u
18	022	12	DC2 (ir!3!_:JR)	68	104	44	D	118	166	76	
19	023	13	DC3 (CTRL S	69	105	45	E	119	167	77	w
20	024	14	DC4 (;!-!:41")	70	106	46	F	120	170	78	x
21	025	15	NAK (réTRL1U)	71	107	47	G	121	171	79	y
22	026	16	SYN (1-1:W. V)	72	110	48	H	122	172	7A	z
23	027	17	ETB (CTRL W)	73	111	49	1	123	173	7B	
24	030	18	CAN (LCTRLJX)	74	112	4A	J	124	174	7C	
25	031	19	EM	75	113	4B	K	125	175	7D	j
26	032	IA	SUB (t.DWZ)	76	114	4C	L	126	176	7E	
27	033	1B	ESC (CTRL[	77	115	4D	M				
28	034	1C	FS	)	78	116	4E	N				
29	035	ID	GS (~1)	79	117	4F	O				
30	036	lE	RS (M-111.1')	80	120	50	P				
31	037	1F	US (1_01-F(0)	81	121	51	Q				
32	040	20	SP	82	122	52	R				
33	041	21	!	83	123	53	S				
34	042	22	„	84	124	54	T				
35	043	23	(1	85	125	55	U				
36	044	24	$	86	126	56	V				
37	045	25		87	127	57	W				
38	046	26	&	88	130	58	X				
39	047	27	'	89	131	59	Y				
40	050	28		90	132	5A	Z				
41	051	29	I	91	133	5B					
42	052	2A	*	92	134	5C	\				
43	053	2B	+	93	135	5D	1				
44	054	2C	,	94	136	5E					
45	055	2D	95	137	5F					
46	056	2E		96	140	60	7				
47	057	2F	/	97	141	61	a				
48	060	30	0	98	142	62	b				
49	061	31	1	99	143	53	c				
4/8	Para su referencia ...









  
  

        

    

 




Conjunto de caracteres gráficos específicos de la
máquina

  
	37	38	39	40
	&H25	&H26	&H27	&H28
&x00100101	&x00100110	&X00100111	&X00101000
Los caracteres aquí reproducidos están representados en la matriz estándar de 8 x 8 en la que se basa la visualización de texto en la pantalla del CPC464. Los caracteres definidos por el usuario pueden ser agrupados para conseguir efectos especiales. Véase la sección 'Caracteres definidos por el usuario' en el capítulo 'Cuando usted guste ...
33	34	35	36
&H21	&H22	&H23	&H24
&X00100001	&X00100010	&X00100011	&X00100100
Para su referencia ...
4/9
41	42	43
&H29	&H2A	&H2B
&x00101001			&X00101010		&X00101011
^^^^^^			........		^^^^	^
Maaaaaaa			........		Ea.	Ea
			........		ala
			........		^	ME
^li^^^a					EME
^a^^a^^					Hagan
^^^^					^^^^^^a
			........		mamamama
^^ma^n^^					
45	46			47
&H2D	&H2E	&H2F
&X00101101
&X00101111
&X00101110
48
&H30 &X00110000







:Za
eip


49	50	51	52	
&H31	&H32	&H33	&H34	
&X00110001	&X00110010	&X00110011	&X00110100	
53	54	55	56	
&H35	&H36	&H37	&H38	
&X00110101	&X00110110	&x00110111	&X00111000	
				
61	62	63	64	
&H3D	&H3E	&H3F	&H40	
&X00111101	&X00111110	&X00111111	&X01000000	













57	58	59	60
&H39	&H3A	&H3B	&H3C
&X00111001	&X00111010	&X00111011	&X00111100





4/10
Para su referencia ...
65	66	67	68
&H41	&H42	&H43	&H44
&X01000001	81X01000010	81X01000011	&X01000100









sr.
gr.
				
				
				
				
				
				
				
					
					
					
	69	70	71	72
&H45	&H46	&H47	&H48
	&X01000101	&X01000110	&X01000111	&X01001000
			
Ea ^ ^^^
ME ^ ^^^
Ea ^ ^^^
 ^^II   ^ ^^^^^^
   
	73	74	75	76
&H49	&H4A	&H4B	&H4C
	&x01001001	&X01001010	&X01001011	&X01001100
			
							
					
					
	77	78			79		80
	&H4D 	&H4E 			&H4F 		&HSO 
	&X01001101	&X01001110			&X01001111		&X01010000
 					
 					
 					
 					
 					
 					
 					
 					
 					
				
						
	81	82	83	84
&H51	&H52	&H53	&H54
	&X01010001	&x01010010	&X01010011	&X01010100
			
4/11
Para su referencia ...
85	86	87	88
&H55	&H56	&H57	&H58
&X01010101	&X01010110	&X01010111	&X01011000

      






89
&H59 &x01011001
ME ^ ME MIS ^ ^^ ^^^ ^ EN ^^ ^ ME ME	ME
ME
93
&H5D &x01011101
90
&H5A &X01011010
^^
^ ^^^ ^
 ^III  ^^M ME ^ ^^^ RE ^ ^^^ INSI ^^^^^
94
&1-15E &x01011110
91
&H5B &X01011011
95
&H5F &x01011111
96
&H60 &X01100000
^111^^^^^^ MEMEZ ^^^^^^
^^^^^^^ ^^^^^^^
			
97	98	99	
&H61	&H62	&H63 	
&X01100001	&X01100010	&X01100011	
101	102	103	104
&H65	&H66	&H67	&H68
&x01100101	&X01100110	&X01100111	&X01101000
105
&H69 &X01101001
106	107	108
&H6A	&H6B	&H6C
&X01101010	&x01101011	&x01101100

l 111.~
F	U ME
	III Mg II	II N EN
 N	II  ME
EN	E  NE
II	ME	E Il 111.
	II	II  E
u	II IIIIIIIIIIMI
4/12	Para su referencia . . .

				
			mama	
				
109	110	111	112
&H6D	&H6E	&H6F	&H70
&X01101101	&X01101110	&X01101111	&X01110000
113	114	115
&H71	&H72	&H73
&X01110001	&X01110010	&X01110011
117	118	119	120
&H75	&H76	&H77	&H78
&X01110101	&X01110110	&X01110111	&X01111000





1
	MENEM		UNEENNEE
II	III		E
N		E		EJE	
II		III		EME	BE
a			Ela	NUE
Ill			
E	U		
	mi		
1			EUEZENNE
E
EN	N
RE^ ^^Z
Ri ERZ MI RE ^ ^^Z
RE	E
ENE	E
REBUZNEN
121	122	123	124
&H79	&H7A	&H7B	&H7C
&X01111001	&X01111010	&X01111011	&X01111100
125	126	127	128
&H7D	&H7E	&H7F	&H80
&X01111101	&X01111110	&X01111111	&X10000000
Para su referencia ...	4/13



^^^^^^^ ^ZIM^^ ^MI^^^^
129	130	131	132
&H81	&H82	&H83	&H84
&X10000001	&X10000010	&X10000011	&X10000100
	^^^	MERMEN	MEEMEMEM	
			
		^^^	^^^^	ENUMERE	
		^^^		11	
		~M			
		EE.^^			
					
			ERZ				
			MEM		111.111		
			^^		EME		
			^^E^	EME		
134	135		136
&H86	&H87		&H88
&X10000110	&X10000111		&X10001000
	EME	mamo		^^^^	
	EME	^^^^^^^	^^^	^^^^
	^^^	^^^^EMEN	^^^	^^^^
	^^^	EME			
	EME		^ ^^^					
	1							
	^^^		^ ^^^					
	^^^		EME					
	EME		EME					
138	139		140
&H 8A	&H8B	&H8C
&X10001010	&X10001011	&X10001100
		EME..		..		
		EME..		..		
		REMEN				
		MEM				
		EME..				
		MU^^				
		M^M				
		^^^^^				
						........	
	ERE					........	
	ERE					..r...	
						........	
	11						...
a	EEEIME						...
^	EE.						
IN	EIMEE						
	^^EEE						
	^^EME						
						........	
						........	
142		143	144		
&H8E	&H8F	&H90
&X10001110	&X10001111	&X10010000
  

    
    

        




137
&H89 &X10001001
141
&H8D &X10001101
^^ ^ ^ MI ^ 
 REME
^^^^ REZUME
145
&H91 &X10010001
147
&H93 &X10010011
148
&H94 &X10010100
146
&H92 &X10010010
4/14
Para su referencia .. .



			
			
			
			
			
			
			
				
	149	150	151
&H95	&H96	&H97
&x10010101	&x10010110	&X10010111
152
&H98 &x10011000
MEMEZ
^^^^^^^^
^^^^^^^^ ^^^^^^^
^^^^
riTEITT
II
^^^^^^ ^^^^^^
^^^^^^^
   
 	153	154			156
 	&H99	&H9A 			&H9C 
 	&x10011001	&X10011010			&x10011100
				
				
				
 					
				
		^^^^^^		
		^^^^^^		
						
		 		
		 		
		158			160
		&H9E 			&HAO 
		&x10011110			&X10100000
			i	VinLi	
					
								
								
								
				^^^			
			^^^^^^			NEN	EN	
			^^^				-u	
				^^^					
				^^^					
					^^^				
									
					^^^^				
					^^^^				
					^^^^				
161	162	163	164
&HA1	&HA2	&HA3	&HA4
&X10100001	&x10100010	&X10100011	&X10100100

	r^^	^							
	^^	^^							
^^	se							
^	^^			EU				
az							
	az							
	m^ma							
				^^^	^^^^^^^				
								
					^^^				
					^^			
					^^^^				
					^^^^				
									
					^^^^				
165	166
&HA5	&HA6
&x10100101	&x10100110
167
&HA7 &X10100111
168
&HA8 &X10101000
  
 
Para su referencia ...	4/15

e
4/16
Para su referencia
e
178
&HB2 &X10110010
179
&HB3 &X10110011
180
&HB4 &X10110100
169
&HA9 &X10101001
71
&HAB «10101011
172
&HAC &X10101100
181
&HB5 &X10110101
183
&HB7 &X10110111
185
&HB9 &X10111001
186
&HBA &X10111010
188
&HBC «10111100
173	174	175
&HAD	&HAE	&HAF
&X10101101	&X10101110	&X10101111
176
&HBO &X10110000

^^ ^  ^ ^
 momo
189
&HBD &X10111101
193
&HC1 &x11000001
205
&HCD &x11001101
190
&iBE &x10111110
^^^^     RIME    ^^ 	ERE
194
&HC2 &x11000010
111~111
      
Zig   
   
	 
 
guRRI	
198
&HC6 &X11000110
206
&HCE &x11001110
191
&HE3F &X10111111
195
&HC3 &x11000011
199
&HC7 &x11000111
207
&HCF &X11001111
192
&HCO &X11000000






^Riz^
196
&HC4 &X11000100
^^ ERE
^	^^^^
^^^
^^^^
^^^^ ^^	 ^
^^ ^^
^^ 	^^^
200
&HC8 &X11001000
^^
^^ ^^ .. ^
^	^
^^^^ ^ ^^
ZENERRER
204
&HCC &X11001100
^^^el^
^^^^ ^^^^^^ ^^^^^^^ ^^^^ ^^^^^^^^
^N^^
208
&HDO &X11010000

































Para su referencia .. .	4/17
209
&HD1 &X11010001
^^^^^^^ ^^^^ MEM.
210
&HD2 &X11010010
^ 	
^ 	
^ 	
^ 	
^	
^ 	
^ 	
^ 
211
&HD3 &X11010011
212
&HD4 &X11010100
^
^
^
^ ^
^
^
^
		J	^			
		 ^^ 			
	zaga			
	zaga 			
	ama	1		
				
213	214			216
&HD5	&HD6 			&HD8 
&X11010101	&X11010110			&X11011000
	mama		
	mama		
			r
			
217
&HD9 &X11011001
218
&HDA &X11011010
221	222
&HDD	&HDE
&X11011101	&X11011110
rama	..
m ^	^^ ..
nftig
IMMIZZ ~II
IMRE
I Nom	NE 
225	226
&HE1	&HE2
&X11100001	&X11100010
219
&HDB &X11011011
223
&HDF &X11011111
227
&HE3 &X11100011
220
&HDC &X11011100
1a1111 ^^~ llrrrra MEM ^^m 
 ms 224
&HEO &X11100000
mora
1111111111
11111 
11111111.
228
&HE4 &X11100100
4/18	Para su referencia ...
II
229
&HE5 &X11100101
233
&HE9 &X11101001
r5.17
^^	
241
&HF1 &X11110001
MUERE ^^^
MEI II
ME RE ME mama
245
&HF5 &X11110101
230
&HE6 &X11100110
238
&HEE &X11101110
246
&HF6 &X11110110
235
&HEB &X11101011
^
239
&HEF &X11101111
	1111	
	
243
&HF3 &X11110011
232
&HE8 &X11101000
M E NUM
ES ^ BE
^	ME ^
^IM^
244
&HF4 &X11110100
ME ^INI
ME
ME
111111
248
&HF8 &X11111000



       

     



  





	g. 
Para su referencia ...	s.
	4/19
1.
					e
					
					
					 
					 
					 
					 
					 
					 
					 
					
					
					
					
					
					
					
				
249	250		251	252	
&HF9 	&HFA 		&HFB 	&HFC	
&x11111001	&X11111010		&X11111011	&X11111100	
					
	IN
				
				
	Egl 				
	JIM				
	I	I"			
	 				
	254				
	&HFE 				
	&x11111110				
					
253			255		
&HFD 			&HFF 		
&X11111101			&X11111111		
4/20	Para su referencia ...	
 
     
 
 
   
 
           
   


















 









Parte 5: Esquemas del teclado
Valores ASCII implícitos generados por las teclas (HEX)
UULJUULJUULJULJULILIULJULJ LJUULJUUULIULJULJUULJUULJUULJUUUULJULIUULILIUUUUUUUUUULJUUl
					
	DISP.1	DISP.2			12	DISP.1	DISP.2	14
08	58	5A	09		52	07	os	54
08	58	5A	09		72	47	as	74
						67	66	
OA	25
OA	35
Para su referencia ...	4/21
JOYSTICK 1
JOYSTICK O
OB
26
OB
36
Códigos expansibles: posiciones y valores implícitos
















4/22	Para su referencia ...
Código
expansible
0(128) 1(129) 2(130) 3(131) 4(132) 5(133) 6(134) 7(135) 8(136) 9(137) 10(138) 11(139) 12(140)
Asignación implícita
Valor ASCII
&30
&31
&32
&33
&34
&35
&36
&37
&38
&39
&2E
&OD
&52&55&4E&22&OD
Carácter
1
2
3
4
5
6
7
8
9
IINTRO1
RUN"  INTRO-1
Nota. Los caracteres expansibles 13 a 31 (141 a 159) no tienen asignada ninguna cadena de expansión. Su expansión se puede definir con la orden KEY de BASIC, y se los puede asignar a teclas concretas con la orden KEY DEF.


     
 
u
u u u u u

 	

Números de las teclas y los joysticks






       
65
66
56
49
48
64
68
59
58
50
67
61
69
60
ag
170 
39
30
38
21
El
6
			
			
		CPC 464 =a		
				8
			
			
40		16	79		
	36			
		26	18		10
		29	28	19			20
47
O
9
II
El
AMSTRAD
21
46
62
63





74
   
75
51
73
JOYSTICK O
72
DISP.11ÍDISP.2
76	77
JOYSTICK 1
48
DISP.11		DISP.2

		53
52		
  


Para su referencia .. .	4/23
   




  




Parte 6: Sonidos Notas y periodos de tono
La tabla siguiente da los valores recomendados para el parámetro (periodo de tono) correspondientes a los tonos y semitonos de las ocho octavas que puede producir el CPC464.
Las frecuencias generadas no coinciden exactamente con las requeridas porque el (periodo de tono) tiene que ser un número entero. El 'error relativo' es el cociente:
frecuencia requerida—frecuencia generada
frecuencia requerida expresado en porcentaje.
NOTA	FRECUENCIA	PERIODO	ERROR RELATIVO
C	DO	32.703	3822	-0.007%	
C#	DO#	34.648	3608	+0.007%	
D	RE	36.708	3405	-0.007%	
D#	RE#	38.891	3214	-0.004%	
E	MI	41.203	3034	+0.009%	
F	FA	43.654	2863	-0.016%	
F#	FA#	46.249	2703	+0.009%	Octava -3
G	SOL	48.999	2551	-0.002%	
G#	SOL#	51.913	2408	+0.005%	
A	LA	55.000	2273	+0.012%	
A#	LA#	59.270	2145	-0.008%	
B	SI	61.735	2025	+0.011%	
NOTA	FRECUENCIA	PERIODO	ERROR RELATIVO	
C	DO	65.406	1911	-0.007%		
C#	DO#	69.296	1804	,0.007%		
D	RE	73.416	1703	+0.022%		
D#	RE#	77.782	1b07	-0.004%		
E	MI	82.407	1517	+0.009%		
F	FA	87.307	1432	+0.019%		
F#	FA#	92.499	1351	-0.028%	Octava -2	
3	SOL	97.999	1276	+0.037%		
G#	SOL#	103.826	1204	+0.005%		
A	LA	110.000	1136	-0.032%		
A#	LA#	116.541	1073	+0.039%		
B	SI	123.471	1012	-0.038%		
						
4/24	Para su referencia ...

fli

	NOTA	FRECUENCIA	PERIODO	ERROR RELATIVO
	C	DO	130.813	956	+0.046%
	C# DO#	138.591	902	+0.007%
D	RE	146.832	851	-0.037%
D# RE#	155.564	804	+0.058%
	E	MI	164.814	758	-0.057%	
F	FA	174.614	716	+0.019%	
	F#	FA#	184.997	676	+0.046%	Octava -1
G	SOL	195.998	638	+0.037%	
G#	SOL#	207.652	602	+0.005%	
	A	LA	220.000	568	-0.032%	
A#	LA#	233.082	536	-0.055%	
	13	SI	246.942	506	-0.038%	
					
NOTA	FRECUENCIA	PERIODO	ERROR RELATIVO
			
	C	DO	261.626	478	+0.046%	DO media
C#	DO#	277.183	451	+0.007%	
	D	RE	293.665	426	+0.081%	
DW	RE#	311.127	402	+0.058%	
E	MI	329.628	379	-0.057%	
	F	FA	349.228	358	+0.019%	
F#	FA#	369.994	338	+0.046%	Octava 0
G	SOL	391.995	319	+0.037%	
	G#	SOL#	415.305	301	+0.005%	
A	LA	440.000	284	-0.032%	LA	internacional
	A#	LA#	466.164	268	-0.055%	
P	SI	493.883	253	-0.038%	

	NOTA	FRECUENCIA	PERIODO	ERROR RELATIVO
C	DO	523.251	239	+0.046%	
	C#	DO#	554.365	225	-0.215%	
D	RE	587.330	213	+0.081%	
D#	RE#	622.254	201	+0.058%	
	E	MI	659.255	190	+0.206%	
F	FA	698.457	179	+0.019%	
	F#	FA#	739.989	169	+0.046%	Octava 1
G	SOL	783.991	159	-0.277%	
G#	SOL#	830.609	150	-0.328%	
	A	LA	880.000	142	-0.032%	
A#	LA#	932.328	134	-0.055%	
	B	SI	987.767	127	+0.356%	
					

411
Para su referencia ...	4/25

						
						
NOTA	FRECUENCIA	PERIODO	ERROR RELATIVO	
C	DO	104£.502	119	-0.24%		
C#	DO#	1101'3.7:1	113	+0.229%		
t	RE	1174.659	106	-0.390%		
D#	RE#	124.;.508	100	-0.441%		
		1318.510	95	+0.206%		
F	7A	1796.91:	89	-0.543%		
F#	FA#	14/7..7,26	84	-0.548%	Octava 2	
G	SOL	1567.982	SO	+0.350%		
G#	SOL#	1661.219	75	-0.328%		
A	LA	1760.000	71	-0.032%		
A#	LA#	1864.655	67	-0.055%		
B	SI	1975.533	63	-0.435%		
NOTA	FRECUENCIA	PERIODO	ERROR RELATIVO	
				
C	DO	2093.004	60	+0.462%		
C#	DO#	2217.461	56	-0.662%		
D	RE	2349.318	53	-0.390%		
D#	RE#	2489.016	50	-0.441%		
E	MI	2637.021	47	-0.855%		
F	FA	2793.826	45	+0.574%		
F#	FA#	2959.955	42	-0.548%	Octava 3	
G	SOL	3135.963	40	+0.450%		
G#	SOL#	3322.438	38	+0.992%		
A	LA	3520.000	36	+1.357%		
A#	LA#	3729.310	34	f-1.417%		
B	SI	3951.066	32	+1.134%		
NOTA	FRECUENCIA	PERIODO	ERROR RELATIVO	
				
C	DO	4186.009	30	+0.462%		
C#	DO#	4434.922	28	-0.662%		
D	RE	4698.636	27	+1.469%		
	RE#	4978.032	25	-0.441%		
E	MI	5274.041	24	+1.246%		
F	FA	5587.652	22	-1.685%		
F#	FA#	5919.911	21	-0.548%	Octava 4	
G	SOL	6271.927	20	+0.350%		
G#	SOL#	6644.875	19	+0.992%		
A	LA	7040.000	18	+1.357%		
A#	LA#	7458.621	17	+1.417%		
B	SI	7902.133	16	+1.134%		

4/26	Para su referencia ...
o

Estas frecuencias han sido calculadas a partir de la correspondiente a la nota LA internacional mediante la siguiente fórmula:
FRECUENCIA=440*(2110CTAVA+((N-101/12))) PERIODO=ROUND(125000/FRECUENCIA)
donde N es 1 para DO, 2 para DO#, etc.
o
e e
o
o
o 	
ko
Ir	Para su referencia	4/27
Parte 7: Mensajes de error de BASIC
1 Unexpected NEXT
Se ha encontrado un NEXT que no corresponde a ningún FOR, o bien la variable mencionada tras NEXT no coincide con la de FOR.
2 Syntax error
BASIC no puede entender la línea porque algo en ella no se ajusta a las reglas de sintaxis del lenguaje.
3 Unexpected RETURN
Se ha encontrado una orden RETURN fuera de una subrutina.
4 DATA exhausted
Una orden READ ha intentado leer más datos de los incluidos en líneas DATA.
5 Improper argument
Este es un error no específico. Puede haber algo incorrecto en el argumento de una función o en un parámetro de una orden.
6 Overflow
El resultado de una operación aritmética ha sobrepasado los márgenes aceptables. Si ha ocurrido en un número en punto flotante, el resultado ha sido mayor que 1.7E+38 (aprox.). También puede haber ocurrido al intentar convertir un número en punto flotante en un entero con signo de 16 bits.
7 Memory full
El programa actual o sus variables ocupan demasido espacio en la memoria, el anidamiento de la estructura de control es demasiado profundo (demasiadas órdenes GOSUB, WHILE o FOR anidadas).
La orden MEMORY provoca este error si se intenta situar el límite de la memoria accesible a BASIC demasiado bajo, o tan alto que sea imposible. Obsérvese que los ficheros abiertos tienen un tampón dedicado a ellos, lo que puede restringir los valores correctos de MEMORY.
4/28	Para su referencia
8 Line does not exist
Se ha mencionado un número de línea que no existe en el programa.
9 Subscript out of range
Uno de los subíndices mencionados en una lista es demasiado pequeño o demasiado grande.
O	10 Array already dimensioned
Una de las listas declaradas en una orden DIM ya ha sido dimensionada antes.
el
11 Division by zero
Ili
División por cero, que puede ocurrir en la división de números reales, en la división entera,
en la operación MOD y en la exponenciación.
el
12 Invalid direct command

Se ha intentado dar como orden directa una orden que sólo es válida si va precedida de un
número de línea.

13 Type mismatch

Incongruencia de tipos. Un dato es literal cuando tenía que ser numérico, o viceversa, o
se ha introducido un dato no numérico en READ o INPUT.
el
14 String space full
el
Se han creado demasiadas cadenas literales y ya no hay espacio disponible para más, inclu-
so después de reorganizar la memoria.

15 String too long
Una cadena literal consta de más de 255 caracteres. Puede haber sido generada por concate-
o	nación de otras.

16 String expression too complex

Expresión literal demasiado compleja. Las expresiones literales pueden generar valores in-O	termedios; cuando el número de estos valores excede de un límite razonable, se produce este error.
O
17 Cannot CONTinue
No se puede reanudar la ejecución del programa con CONT. Obsérvese que CONT reanuda el programa después de una instrucción STOP, de sd] Isc	1 o de un error, pero a condi-
',	ción de que no se modifique el programa durante la pausa.
al
Para su referencia	4/29


18 Unknown user function
Se ha invocado una FN sin la correspondiente DEF FN.
19 RESUME missing
Se ha llegado al final del programa mientras se ejecutaba una rutina de gestión de errores (esto es, una rutina invocada por ON ERROR GOTO).
20 Unexpected RESUME
RESUME sólo es válida en una rutina de gestión de errores (esto es, en una rutina invocada por ON ERROR GOTO).
21 Direct command found
Al cargar un fichero se ha encontrado una línea sin número de línea.
22 Operand missing
BASIC ha encontrado una expresión incompleta.
23 Line too long
BASIC ha convertido a su forma interna una línea y ésta ha resultado ser demasiado larga.
24 EOF met
Se ha intentado leer más allá del final del fichero de entrada.
25 File type error
El fichero que se ha leído no es del tipo adecuado. OPENIN sólo puede abrir ficheros de texto ASCII. Análogamente, LOAD, RUN, etc., solamente pueden acceder a ficheros creados por SAVE.
26 NEXT missing
BASIC ha encontrado un FOR al que no corresponde ningún NEXT. La línea mencionada tras el mensaje es aquella en la que se encuentra el FOR.
27 File already open
Se ha ejecutado una orden OPENIN u OPENOUT sin previamente cerrar el fichero que estaba abierto.
28 Unknown command
BASIC no encuentra un comando externo que corresponda a lo que se ha escrito tras 1 .
4/30	Para su referencia
o
o
o
e
a
e
110
29 WEND missing
BASIC ha encontrado un WHILE al que no corresponde ningún WEND.
e
30 Unexpected WEND
Se ha encontrado un WEND que no corresponde a ningún WHILE, o bien el WEND no e	concuerda con el WHILE del bucle actual.
o
Parte 8: Palabras reservadas de BASIC

A continuación damos la lista de las palabras reservadas para el BASIC de AMSTRAD, las cuales, por consiguiente, no pueden ser utilizadas como nombres de variables. ABS, AFTER, AND, ASC, ATN, AUTO
e
BIN$, BORDER
e		CALL, CAT, CHAIN, CHR$, CINT, CLEAR, CLG, CLOSEIN, CLOSEOUT, CLS, CONT, COS, CREAL
e
DATA, DEF, DEFINT, DEFREAL, DEFSTR, DEG, DELETE, DI, DIM, DRAW, DRAWR
EDIL El, ELSE, END, ENT, ENV, EOF, ERASE, ERL, ERR, ERROR, EVERY, EXP FIX, FN, FOR, FRE
e
GOSUB, GOTO
e	HEX$, HIMEM
IF, INK, INKEY, INKEY$, INP, INPUT, INSTR, INT
gi
JOY
KEY LEFT$, LEN, LET, LINE, LIST, LOAD, LOCATE, LOG, LOG10, LOWER$
gi
MAX, MEMORY, MERGE, MID$, MIN, MOD, MODE, MOVE, MOVER
NEXT, NEW, NOT
ON, ON BREAK, ON ERROR GOTO 0, ON SQ, OPENIN, OPENOUT, OR, ORIGIN, gi	OUT
PAPER, PEEK, PEN, PI, PLOT, PLOTR, POKE, POS, PRINT
RAD, RANDOMIZE, READ, RELEASE, REM, REMAIN, RENUM, RESTORE,

RESUME, RETURN, RIGHT$, RND, ROUND, RUN
e	SAVE, SGN, SIN, SOUND, SPACE$, SPC, SPEED, SQ, SQR, STEP, STOP, STR$, STRING$, SWAP, SYMBOL

TAB, TAG, TAGOFF, TAN, TEST, TESTR, THEN, TIME, TO, TROFF, TRON e	UNT, UPPER$, USING
VAL, VPOS
al	WATT, WEND, WHILE, WIDTH, WINDOW, WRITE
ZONE
[	Para su referencia	4/31
ED	XOR, XPOS YPOS

III>




























Parte 9: Plantillas
Pantalla de texto; modo 0 (20 columnas)
4/32	Para su referencia
10	111	0	N	ID	10	CC
et E
O
C.J
O
O
O
`Zr
E
	SE
	VE
	EZ
	ZZ
	LZ
	OZ
	61
	8L
	LL
	91
	SI
	VL
	EL
	EL
	01
	5
05	6E	81	LE	9E	SE	VE	a	LE	LE	0£	61	8Z	LE	9Z	90	VZ	EZ	ZE	LE	OZ	61	81	LL	9L	91	VI.	El	EL	LL	01	68	L99	VEZ	L	9
																																								
																																								
																																								
																																								
																																								
																																								
																																								
																																								
																																								
																																								
																																								
																																								
																																								
																																								
																																								
																																								
																																								
																																								
																																								
																																								
																																								
																																								
																																								
																																								
																																								
00	6E	8£	LE	9E	SE	VE	EL	LE	LE	OE	6Z	8Z	LZ	9Z	90	VE	CE	ZZ	LE	OZ	61	8L	LL	91	91.	In	EL	ZL	LL	01	69	C99	VE	Z	L	
Lailoweessesseessesesesseeseeseseelti
PIPPresessessessessessessesseeseseeiffl
os	sz	9L	oz	DL	ot	go	99	99	Z9	09	95	95	95	zs	05	eo	91	99	/9	09	su	9F	VE	ZE	OC	BZ	92	pl	ZZ	02	91	91.	91	Zt	01	9	9	y	2	92
	42
	El
	Z2
	OZ
	61
	81
	91
	91
	91
	EL
	Z1
	LI
	OL
	6
	9
	C
																																								
																																								
																																								
																																								
																																								
																																								
																																								
																																								
																																								
																																								
																																								
																																								
																																								
																																								
																																								
																																								
																																								
																																								
																																								
																																								
																																								
																																								
																																								
																																								
																																								
08	91	9L	IL	ZL	Oi	B9	99	49	29	09	95	95	99	Z9	05	99	99	99	Z9	OV	9C	9E	0E	ILL	OE	HZ	91	VZ	ZZ	OZ	SL	91	/t	Zt	01	e	9	9	Z	
c.)
E
O
Go
o
o
E
001	OIL	001	06	08	OL	09	09	017	00	OZ	01
1		
J

11:
:S^ME:
.......u....
WEDOMENO	 EIMMEME 

1 1	
9110
	INME
	mas
! 	
MOO	
	ME10 1~~041~	
Sem 	:	:	
	:	:	14:::~~1111 ea.	
	:	
	41: 	: 	//S
50O0	
O»
OWOMMOU	H^W	 :	 :		 : :::
Mi 
	:	Ea WID
MIDOMMEMON MMMMM NOM@	 	
	:	
	:	IDOWDOMMes ::
SOM el SO
:	IMMO
@ENCIMO 	
WOOWECIO  MEMOS*	
110 MMMM :IONECOMMe
	:	
so..	ammemmem	^	^			ggiii
	mea	MMMMMM migue
immoggiges	
emeassammea^mummouweigegg_	
_	
11M11
die MMMMM OWIDOMOMOMMIMON 	:
	INDS
MOSOMOWOOMOMMOMOI	
	ROOM. 	
	MOSE MMM ::MO:21~	
u	
MOZOOMEMOO:
ESO	 OMO	
 	:	
	NIBIZON MMMMM	:	:	
^	: 		:::
:	:	:	
Ha	ESO
:mg 	HM	1	ilM: 

IBMOOMMIDINOS MMMMMM
s. 	E:	
	!MEMOS^	
	MEND
^
01 0
6
9
0	01
E
9
8
6
01 OZ
                              
Parte 10: Conexiones
Zócalos de entradas y salidas del CPC464








Zócalo del joystick
VISTO POR DETRAS
Patilla 1 ARRIBA 	Patilla 6 DISPARO 27 
Patilla 2 ABAJO 	Patilla 7 DISPARO 1 
Patilla 3 IZQUIERDA 	Patilla 8 MASA 2 
Patilla 4 DERECHA 	Patilla 9 MASA
Patilla 5 N/C	
4/36	Para su referencia
IMPRESORA
UNIDAD DE DISCO
5V c.c.
MONITOR




       


        


 

Zócalo del monitor


5	1
6
42
3
		
Patilla 1 ROJO 	Patilla 4 SINC 
 	Patilla 2 VERDE 	Patilla 5 MASA 
 	Patilla 3 AZUL	Patilla 6 LUM
DERECHO	
Zócalo estéreo		
	
	
	 IZQUIERDO
V
A	 DERECHO

	 MASA

MASA IZQUIERDO
1
Patilla 1 CANAL IZQUIERDO
Patilla 2 CANAL DERECHO Patilla 3 MASA

    
 

 Para su referencia ...	4/37
VISTO POR DETRAS

















 





  e
e
 e e
Zócalo de unidad de disco
VISTO POR DETRAS
49 47 45 43 41 39 37 35 33 31 29 27 25 23 21 19 17 15 13 11	9	7 5	3
60 48 46 44 42 40 38 38 34 32 30 28 26 24 22 20 18 16 14 12 10 8 6	4	2
Patilla 1 SONIDO	Patilla 18 AO	Patilla 35 INT
Patilla 2 MASA	Patilla 19 D7	Patilla 36 ÑMi 
Patilla 3 M5	Patilla 20 D6	Patilla 37 BUSR2 
Patilla 4 A14	Patilla 21 D5	Patilla 38 BUSAK
Patilla 5 A13	Patilla 22 D4	Patilla 39 READY 
Patilla 6 Al2	Patilla 23 D3	Patilla 40 BUS RESET
Patilla 7 Al 1	Patilla 24 D2	Patilla 41 RESET 
Patilla 8 A10	Patilla 25 DI	Patilla 42 ROMEN
Patilla 9 A9	Patilla 26 DO	Patilla 43 ROMDIS
Patilla 10 A8	Patilla 27 +5v	Patilla 44 RAMRD
Patilla 11 A7	Patilla 28 MREQ	Patilla 45 RAMDIS
Patilla 12 A6	Patilla 29 MI	Patilla 46 CURSOR
Patilla 13 A5	Patilla 30 RFSH	Patilla 47 LAPIZ ÓPTICO
Patilla 14 A4	Patilla 31 IORQ	Patilla 48 EXP
Patilla 15 A3	Patilla 32 RD	Patilla 49 MASA
Patilla 16 A2	Patilla 33 WR	Patilla 50
Patilla 17 Al	Patilla 34 HALT
Zócalo para la impresora
VISTO POR DETRAS
17 16	15 14	13	12 11	10	9	8	7	6	5	4	3	2	1
r-1======.1=1.1===L=4=7
	1^1 11^11
35 34 33 32 31 30 29 28 27 26 25 24 23 22 21 20	19
Patilla 1 STROBE	Patilla 19 MASA
Patilla 2 DO	Patilla 20 MASA
Patilla 3 DI	Patilla 21 MASA
Patilla 4 D2	Patilla 22 MASA
Patilla 5 D3	Patilla 23 MASA
Patilla 6 D4	Patilla 24 MASA
Patilla 7 D5	Patilla 25 MASA
Patilla 8 D6	Patilla 26 MASA
Patilla 9 MASA	Patilla 27 MASA
Patilla 11 BUSY	Patilla 28 MASA
Patilla 14 MASA	Patilla 33 MASA
Patilla 16 MASA	Todas las demás: N/C
4/38	Para su referencia ...





Parte 11: Impresoras

Interfaz

Al CPC464 se le puede conectar cualquier impresora que tenga 'interfaz paralelo tipo Cen-
tronics' de 7 bits.
El cable es fácil de construir, pues no tiene que realizar más que una conexión biunívoca entre el zócalo IMPRESORA del ordenador y el conector de la impresora. Nótese que en
la salida del ordenador hay dos terminales menos que en el conector de la impresora, con
objeto de permitir la utilización de un conector estándar para circuito impreso.
Los detalles de las patillas del interfaz están ilustrados en la parte 9 de este capítulo.
El cable debe conectar el terminal 1 del ordenador con el 1 de la impresora, el 19 del ordena-
dor con el 19 de la impresora, etc. Sin embargo, los terminales 18 y 36 de la impresora no
deben ser conectados al ordenador. Obsérvese que aunque los terminales de la fila superior del zócalo IMPRESORA del ordenador están numerados del 1 al 17, la numeración de la
fila inferior empieza en el 19, no en el 18, para mantener la correspondencia con el conector de la impresora.
El ordenador utiliza la señal BUSY (patilla 11) para sincronizar con la impresora y espera cuando ésta está en fuera de línea.
No es necesario enviar a la impresora códigos de preparación; la salida del ordenador se
dirige a la impresora especificando el canal #8.
La salida IMPRESORA está diseñada para conectar impresoras de matriz de puntos de bajo costo. No obstante, con el interfaz adecuado, se le pueden conectar impresoras de marga-
rita, plotters e impresoras de color por chorro de tinta. La compatibilidad está asegurada por el interfaz paralelo.

La programación incorporada a la impresora AMSTRAD DMP 1 facilita el funcionamiento
en modo gráfico así como los volcados de pantalla.

 
	
 	
 	
 	

	
Para su referencia ...	4/39
    


                   



   
rA
Parte 12: Joysticks
El ordenador puede funcionar con uno o dos joysticks. La máquina los considera como parte del teclado, y por consiguiente su estado se puede determinar con INKEY e INKEYS.
Nótese que en la mayor parte de los casos, el botón principal de disparo del joystick es interpretado como `DISP .2' por el CPC464.
Las funciones JOY(0) y JOY(1) permiten inspeccionar directamente los dos joysticks. Cada una de estas funciones genera un resultado, interpretable bit a bit, que informa de la situación de los interruptores del joystick en el momento en que se realizó la última comprobación del teclado.
La tabla siguiente indica los valores generados por los dos joysticks. Además de los números de la función JOY, se incluyen los números que se deben utilizar en instrucciones que llevan como parámetro los números de las teclas (tales como INKEY y KEY DEF).
Estado	Función JOY	Números de tecla
	Bit que	Valor	Primer	Segundo	Tecla
	está a 1	generado	joystick	joystick	equivalente
Arriba	0	1	72	48	'6'
Abajo	1	2	73	49	,5,
Izquierda	2	4	74	50	'R'
Derecha	3	8	75	51	'T'
Disparo 2	4	16	76	52	`G'
Disparo 1	5	32	77	53	'F'
Nótese que cuando se generan los valores correspondientes al segundo joystick, el ordenador no puede saber si esos valores han sido generados por el joystick o por las teclas equivalentes (última columna de la tabla anterior). Esto representa que se puede utilizar el teclado como sustituto del segundo joystick.
4/40	Para su referencia ...




Parte 13: Ampliaciones del sistema

residentes (RSX)
El repertorio de instrucciones de BASIC puede ser ampliado añadiéndole 'órdenes externas'. En ocasiones, estas órdenes estarán grabadas en ROMs externas (por ejemplo, en la ROM de la unidad de disco opcional DDI-1, en la ROM del interfaz serie RS232C, etc.).
Pero también es posible incorporar nuevas órdenes externas (cuando BASIC ya está activa.,	do) cargando instrucciones de código de máquina adecuadas en la RAM. Tales órdenes ex-
ternas son las llamadas 'ampliaciones del sistema residentes' (RSX) y actúan exactamente
igual que las basadas en ROM. Las RSX han de ser cargadas desde la cinta cada vez que
se entra en BASIC (en frío o en caliente).
Todas las órdenes externas se escriben precedidas del signo .

Entre sus aplicaciones típicas se encuentra el control de periféricos (unidad de disco, inter-
faz serie, lapicero fotosensible, ...) y la ampliación de BASIC con nuevas funciones y ruti-

nas (por ejemplo, para rellenar recintos, dibujar circunferencias, realizar volcados de pan- talla en la impresora, etc.).
La información necesaria para diseñar y gestionar las RSX se puede encontrar en la 'Guía
del firmware', SOFT 158.
           

 
Para su referencia ...	4/41


	 
Parte 14: Memoria
El CPC464 dispone de 64K de RAM y 32K de ROM. Esta memoria es utilizable por BASIC según se indica en la figura siguiente. La RAM está dividida en cuatro bloques de 16K cada uno, numerados del O al 3. La pantalla utiliza el bloque 3; la zona superior del bloque 2 está dedicada a las variables del sistema, según se muestra en la figura.
RAM
_ &FFFF	r
Bloque 3		PANTALLA	ROM de disco	
			ROM de BASIC	
			(externa)	
	&C000				
					
				Area de datos del firmware
				
	&????			Bloque de saltos
Bloque 2		CARACTERES DEFINIBLES		Area de datos de BASIC
	HIMEM			Área de datos de ROMs externas	
				
			
	&8000		
			
			
Bloque 1			
			Area para el programa de BASIC
				
&4000			
			
			
Bloque O		ROM del firmware	
				
&0000					
Nota. &???? depende de las ROMs externas conectadas.
Los caracteres definidos por el usuario están inicialmente inmediatamente por encima de HIMEM. Este valor se puede modificar mediante una orden MEM ORY; además se reduce en 4K automáticamente para crear un tampón cada vez que se abre un fichero. El número de caracteres definibles por el usuario (controlado por la orden SYMBOL AFTER de BASIC) sólo se puede modificar si HIMEM no ha variado desde la última vez que aquél fue establecido (o si en esa ocasión se estableció en cero, con SYMBOL AFTER 256). Cuando se entra en BASIC, el número de caracteres definibles por el usuario se establece como si se hubiera ejecutado la orden SYMBOL AFTER 240.
Por consiguiente, antes de cambiar permanentemente HIMEM, es prudente reducir a cero la zona de memoria dedicada a los caracteres definibles; después se modifica HIMEM y fi-




   




      
4/42	Para su referencia ...





nalmente se restablece la zona de caracteres definibles al tamaño deseado. De esta menera los siguientes programas podrán ejecutar nuevas órdenes SYMBOL AFTER sin problemas.
El siguiente ejemplo ilustra este método, aplicado a la carga de una RSX:
100 SYMBOL AFTER 256 ' anular memoria para caracteres definibles por el usuario
110 direccionrxs=HIMEM—longitudrsx
120 MEMORY direccionrsx-1
130 LOAD "codigrsx",direccionrsx
140 CALL direccionrsx ' inicializar rsx
150 SYMBOL AFTER 140 ' restablecer espacio para caracteres definibles RAM
&FFFF	—
  Área de datos del firmware
&C000 		Bloque de saltos
RUTINAS Y DATOS DE RSX	Área de datos de BASIC
Área de datos de ROMs externas HIMEM CARACTERES DEFINIBLES 
&8000
 
Área para e! programa de BASIC &4000
  
&0000 	
Mapa de RAM con las RSX cargadas en la posición recomendada.
 





Para su referencia ..	4/43






        


   
Otras entradas y salidas
La mayor parte de las direcciones de puertas de entrada/salida (E/S) está reservada por el ordenador. En particular, las direcciones inferiores a &7FFF no se deben utilizar nunca.
Está previsto que la parte de la dirección representada por AO-A7 refleje el tipo de dispositivo externo de E/S, y que las líneas de dirección A8 y A9 puedan ser decodificadas para seleccionar registros dentro del dispositivo de E/S. De las restantes líneas, sólo A10 puede ser decodificada (a nivel `bajo'); las líneas Al 1 a A15 están todas a nivel 'alto'. Así, los registros de los dispositivos se pueden direccionar como &F8??, &F9??, &FA?? y &FB??, donde ?? puede estar entre DC y FF para los interfaces de comunicación y entre EO y FE para otros periféricos.
Nótese que se deben utilizar instrucciones del Z80 que pongan el registro B en la mitad superior del bus de direcciones (A15-A8).
Memorias ROM adicionales
El sistema operativo está preparado para seleccionar ROMs adicionales en lugar de parte de la ROM interna. La lógica de gestión de direcciones y de selección de bancos estará en un módulo conectado al bus de expansión, pero todas las señales necesarias están en el corrector de expansión.
      
4/44	Para su referencia ...
