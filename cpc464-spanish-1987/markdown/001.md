# Capítulo 1. Curso de introducción

## Parte 1: Instalación y mantenimiento

### (Apartado sin terminar de revisar)

El CPC464 puede ser instalado con:

1. El monitor de fósforo verde AMSTRAD GT64.

2. El monitor de color AMSTRAD CTM640.

3. O la unidad modulador/fuente de alimentación AMSTRAD MP1 conectada a un televisor de color (en UHF).


### Conexión del ordenador a la red

El CPC464 sólo se puede conectar a la red de 220-240V c.a., 50 Hz.

Desenchufe la clavija de la toma mural siempre que no esté utilizando el ordenador.

No extraiga ningún tornillo ni trate de abrir la carcasa del ordenador, del 
monitor ni de la unidad MP1. Lea y respete las advertencias que se dan en la 
etiqueta de características, que está situada en la cara inferior de la carcasa 
del ordenador y de la fuente de alimentación:

    Desconectar cuando no se utilice.
    ¡ATENCIÓN!
    No manipular en su interior.

y en la cara posterior de los monitores:

    NO ABRIR SIN ANTES DESCONECTAR
    LA TENSIÓN DE RED.



### Conexión del ordenador a un monitor

(Si va a utilizar su CPC464 con la unidad MP1, no es necesario que lea esta sección.)

1. Cerciórese de que el monitor no está conectado a la red.

2. Conecte el cable que sale de la cara frontal del monitor y termina en una clavija grande (DIN de 6 patillas) al zócalo posterior del ordenador marcado con **MONITOR**.

3. Conecte el cable que sale de la cara frontal del monitor y termina en la clavija más pequeña al zócalo posterior del ordenador marcado con 5V c.c.


![](file:img/cpc464_01_001.png)


### Conexión del ordenador a la unidad modulador/fuente de alimentación MP1

La MP1 es una unidad opcional que el usuario puede querer adquirir si está utilizando actualmente el CPC464 con el monitor de fósforo verde GT64. La MP1 permite conectar el
CPC464 a un televisor de color doméstico, para así disfrutar de las posibilidades de color del CPC464.

La MP1 se debe colocar inmediatamente a la derecha del CPC464.

1. Cerciórese de que la MP1 no está conectada a la red.

2. Conecte el cable de la MP1 que termina en una clavija grande (DIN de 6 patillas) al zócalo posterior del ordenador marcado con **MONITOR**.

3. Conecte el cable de la MP1 que termina en una clavija pequeña al zócalo posterior del ordenador marcado con 5V c.c.

4. Conecte el cable que sale de la MP1 y termina en una clavija de antena a la entrada de antena de su televisor.

![](file:img/cpc464_01_002.png)

### Encendido del sistema CPC464 con GT64 o con CTM640

(Si va a utilizar su CPC464 con la unidad MP1, no es necesario que lea esta sección.)

Una vez conectado el sistema según se ha explicado en secciones anteriores, inserte la clavija de red en la toma mural. Para encender el sistema, pulse el botón **ALIMENTACION** que está en la cara frontal del monitor, de modo que quede en posición «**ENC.**». Si este botón está en «**APAG.**», el suministro de corriente al resto del sistema queda interrumpido.

Encienda el ordenador mediante el interruptor deslizante marcado con **ALIMENTACION**, que está en su cara derecha.

En este momento se debe encender el piloto rojo (**ENC.**) que está en el centro del teclado; en el monitor se verá el siguiente mensaje:

![](file:img/cpc464_01_003.png)


Para evitar la fatiga visual excesiva, ajuste el control de brillo marcado con **BRILLO** al mínimo necesario para que el texto se vea cómodamente, sin que deslumbre ni resulte borroso.

El control **BRILLO** se encuentra en la parte inferior de la cara frontal del monitor GT64 y en el lateral derecho del CTM640.

En el caso del GT64, puede ser necesario ajustar los controles de contraste (**CONTRASTE**) y de fijación del cuadro vertical (**SINCRO. VERT.**), que están en el panel frontal.

El mando de **CONTRASTE** se debe poner en el mínimo compatible con la cómoda visualización de los textos.


### Encendido del sistema CPC464 con la unidad modulador/fuente de alimentación MP1

Una vez conectado el sistema según se ha explicado en secciones anteriores, inserte la clavija de red en la toma mural. Encienda el ordenador mediante el interruptor deslizante que está en su lateral derecho.

En este momento se debe encender el piloto rojo que está en el centro del teclado. Ahora debe sintonizar el televisor para recibir las señales del ordenador.

Si su televisor tiene un selector de canales de botonera, pulse el botón correspondiente a
un canal no utilizado. Ajuste el mando de sintonía siguiendo las instrucciones del manual del televisor (si dispone de un dial de sintonía, pruebe en las proximidades del canal 36) hasta obtener la siguiente imagen:

![](file:img/cpc464_01_003.png)


Trate de conseguir la máxima nitidez posible. El texto aparecerá en color amarillo dorado sobre fondo azul.

Si el televisor tiene un selector de canales rotatorio, gírelo hasta que pueda ver la imagen y ésta sea estable (canal 36, aproximadamente).
  
### Otras conexiones ...

Si desea conectar otros periféricos, tales como

* Joystick(s)
* Impresora
* Amplificador o altavoces externos Dispositivos de expansión
* etcétera,

al sistema básico, consulte la Parte 2 de este «Curso de introducción».


### Anomalías en el funcionamiento del sistema

**Al pulsar el interruptor de alimentación no se ilumina la pantalla**

* Apague el interruptor pulsándolo por segunda vez. 

* Desconecte el ordenador de la toma mural.

* Enchufe en ella una lámpara que usted sepa que funciona para comprobar que llega corriente.

* Desconecte la impresora.

* Si tiene instalado un interfaz RS232, desconéctelo.

* Vuelva a enchufar el ordenador en la toma mural; si hay algún interruptor que controle el paso de corriente al enchufe, enciéndalo.

* Finalmente, vuelva a pulsar el interruptor de alimentación.

Si el problema persiste, consulte a su distribuidor.

### Limpieza

Para la limpieza de la pantalla y el teclado recomendamos el uso de espumas antiestáticas en aerosol. **En ningún caso se puede utilizar productos limpiadores espiritosos**.



## Parte 2: Conexión de los periféricos

En esta sección vamos a explicar cómo se conectan al sistema CPC464 diversos periféricos,
cuyo funcionamiento se explica en las correspondientes secciones de este manual.

### Joysticks (bastoncillos de mando)

El joystick AMSOFT modelo JY1 es un aparato opcional que el usuario puede desear adquirir si va a utilizar su CPC464 con programas de juegos diseñados para aprovechar las posibilidades de control y disparo del joystick.

Conecte el cable procedente del joystick en el zócalo marcado con **PUERTA DE USUARIO**
en el ordenador. El CPC464 admite dos joysticks; el segundo se conecta en el zócalo que hay en la peana del primero.

En secciones posteriores de este manual daremos más información sobre los joysticks.

### Impresora

El CPC464 puede ser conectado a cualquier impresora de interfaz tipo Centronics. Para conectar el ordenador a la impresora AMSTRAD, basta con utilizar el cable suministrado con ésta.

Para conectar cualquier otra impresora de tipo Centronics se necesita el cable AMSOFT PL1.

Inserte el extremo del cable que termina en un conector plano en el zócalo del ordenador
marcado con **IMPRESORA**.

Inserte el otro extremo del cable, que termina en el conector de tipo Centronics, en el zócalo de la impresora. Si la impresora tiene abrazaderas de seguridad, fíjelas en las ranuras que hay en los laterales del conector.
Más adelante daremos información sobre el manejo de la impresora.

![](file:img/cpc464_01_004.png)
  
### Amplificador y altavoces externos

El CPC464 puede ser conectado a un sistema de amplificador y altavoces estereofónicos, única forma de apreciar plenamente las capacidades sonoras del ordenador.

El cable de entrada al amplificador debe teminar en una clavija estéreo de 3.5 mm, que se inserta en la hembra marcada con **E/S** en el panel posterior del ordenador.

Las conexiones de la clavija deben ser las siguientes:

* Extremo de la clavija: canal izquierdo. 
* Anillo intermedio: canal derecho. 
* Cuerpo de la clavija: masa.

El CPC464 entrega a la salida **E/S** una señal de nivel constante; así pues, el volumen, el balance y el tono deben ser regulados con los mandos del amplificador externo.

También se puede conectar auriculares de alta impedancia, aunque el volumen no podrá ser regulado por el mando de **VOLUMEN** del ordenador. Los auriculares de baja impedancia, que son los habitualmente utilizados con los equipos de alta fidelidad, no pueden ser conectados directamente al ordenador.

Más adelante explicaremos cómo enviar sonidos a cada uno de los tres canales del CPC464.

### Dispositivos de expansión

Al ordenador CPC464 se le pueden conectar diversos dispositivos de expansión (unidad de disco, interfaz serie, modem, lápiz fotosensible, ROMs, etc.) por medio del zócalo marcado con **UNIDAD DE DISCO** que está en la cara posterior del ordenador.

También se puede conectar en ese zócalo el amplificador/sintetizador de voz AMSOFT modelo SSA2.

Las conexiones del zócalo **UNIDAD DE DISCO** se describen en el capítulo titulado 'Para su referencia ...'


## Parte 3: Manos al teclado


Antes de empezar a cargar y grabar programas necesitamos familiarizarnos con algunas teclas del ordenador. Si tiene usted alguna experiencia en el manejo de los ordenadores, puede omitir la lectura de esta sección.

Encienda el ordenador y verá el mensaje inicial en la pantalla. Vamos a explicar las funciones de las diversas teclas:

![](file:img/cpc464_01_005.png)

Las cuatro teclas que están marcadas con sendas flechas son las 'teclas de movimiento del cursor'. Estas teclas sirven, pues, para mover el cursor por la pantalla.

Púlselas todas ellas y practique hasta familiarizarse con su funcionamiento.
 			
![](file:img/cpc464_01_006.png) 			
		

Hay dos teclas **[INTRO]**. Ambas sirven para introducir en el ordenador lo que 
usted ha tecleado. Una vez pulsada la tecla **[INTRO]**, el cursor salta 
automáticamente a la línea siguiente de la pantalla. Siempre que escriba una 
orden directa o una instrucción de programa, pulse **[INTRO]** al final.

De ahora en adelante escribiremos **[INTRO]** para indicar que se debe pulsar esta tecla al terminar de teclear órdenes o instrucciones de programa.

![](file:img/cpc464_01_007.png) 

Esta tecla sirve para borrar el carácter (letra, número o signo) que está a la izquierda del cursor.

Teclee **abcd** y observe que el cursor queda inmediatamente a la derecha de la letra **d**. Para borrar la **d**, pulse la tecla **[BORR]**. Si la mantiene pulsada durante algún tiempo, verá cómo se borran también las otras tres letras.

![](file:img/cpc464_01_008.png) 

Hay dos teclas **[MAYS]**, una a cada lado del teclado. Si mantiene pulsada una de ellas al tiempo que pulsa una tecla literal (de letras), en la pantalla aparecerá la correspondiente letra en mayúscula.

Escriba la letra **e**, pulse la tecla **[MAYS]** y, antes de soltarla, vuelva a escribir la e. En la pantalla verá lo siguiente:

eE



Escriba ahora unos cuantos espacios (manteniendo pulsada durante algún tiempo la barra espaciadora). Para probar el efecto de **[MAYS]** con las teclas numéricas, escriba el 2, pulse **[MAYS]** y, sin soltarla, vuelva a escribir el 2. En la pantalla aparecerá lo siguiente:

2"

Haga pruebas con las diferentes teclas de caracteres para observar su efecto con y sin **[MAYS]**.

![](file:img/cpc464_01_009.png) 

### (=== Pendiente de seguir revisando desde aquí ===)

**[FIJA MAYS]**

Su efecto es en cierto modo similar al de **[MAYS]**. Con sólo pulsarla una vez, las letras que se escriban a continuación aparecerán en mayúsculas en la pantalla, pero, en cambio, las teclas numéricas y de signos no resultan afectadas.

Pulse **[FIJA MAYS]** una sola vez y luego escriba lo siguiente:

abcdef123456

En la pantalla aparecerá:

ABCDEF123456

Observe que las letras han sido convertidas a mayúsculas y que, sin embargo, los números no han sido convertidos a los signos que están grabados en la parte superior de las teclas
numéricas. Para obtener estos signos se pulsa la tecla correspondiente en combinación con
**[MAYS]** Escriba ahora lo siguiente, manteniendo pulsada la tecla **[MAYS]**

abcdef123456

En la pantalla aparecerá:

ABCDEF!"#$%&

Para volver a caracteres normales (en minúsculas), pulse por segunda vez **[FIJA MAYS]**

![](file:img/cpc464_01_010.png) 

Si lo que desea es obtener letras mayúsculas y los signos marcados en la parte superior de las teclas, sin tener que mantener pulsada la tecla **[MAYS]**, puede hacer lo siguiente: mantenga pulsada la tecla 1CTRLJ y pulse **[FIJA MAYS]** una sola vez. Para comprobar el efecto de esta combinación, escriba lo siguiente:

abcdef123456

En la pantalla aparecerá: 

ABCDEF!"#$%&

En esta situación, se puede escribir números utilizando el teclado numérico que está a la derecha del teclado principal.

Manteniendo pulsada la tecla CTRL 1 al tiempo que se pulsa **[FIJA MAYS]**. se vuelve al modo
anterior (es decir, a minúsculas o a bloqueo de mayúsculas). Si el modo al que ha vuelto es a bloqueo de mayúsculas, pulse **[FIJA MAYS]** para retornar al modo normal, esto es, a minúsculas.     

![](file:img/cpc464_01_011.png) 

Esta tecla borra el carácter que está bajo el cursor.

Escriba ABCDEFGH. El cursor ha quedado a la derecha de la última letra (la H). Pulse cuatro veces la tecla 	. El cursor se ha movido cuatro posiciones hacia la izquierda, de
modo que está superpuesto a la letra E.

Observe que la letra E es visible a través del cursor. Pulse 	 y observe cómo desaparece
la letra E y cómo se mueven hacia la izquierda las letras FG H; bajo el cursor queda la F. Pulse durante unos instantes It LIR 1: primero desaparece la F, y luego la G y la H.

![](file:img/cpc464_01_012.png) 

Esta tecla se utiliza para abandonar una función que el ordenador esté realizando. Si se pulsa [ESC], una vez, el ordenador interrumpe su tarea momentáneamente, y la reanuda si a continuación se pulsa cualquier otra tecla.

Si se pulsa  [ESC] dos veces seguidas, el ordenador abandona definitivamente la tarea que está realizando y queda a la espera de otras órdenes.

Importante

Cuando se han escrito 40 caracteres en una línea, el cursor está en el extremo derecho de ella; el siguiente carácter aparecerá automáticamente al principio de la línea siguiente. Esto significa que no se debe pulsar **[INTRO]**, a diferencia de lo que se haría si se estuviera trabajando con una máquina de escribir, en la que se ha de teclear el retorno del carro al acercarse al final de cada línea.

El ordenador realiza esta función automáticamente; ante un **[INTRO]** indebido, reaccionará con un mensaje de error, generalmente Syntax error, bien en el acto o bien más tarde, cuando se ejecute el programa.

```
Syntax error (error de sintaxis)
```


Cuando en la pantalla aparece el mensaje Syntax error, el ordenador está diciendo que
no ha entendido la orden que se le ha dado.

Por ejemplo, escriba

```
printt [INTRO]
```

En la pantalla aparecerá el mensaje:

```
Syntax error
```

Esto ocurre porque el ordenador no entiende la instrucción printt. 1111	Si el mismo error se comete en una línea de programa, tal como
10 printt 'abc" en mensaje Syntax error no aparece hasta que se ejecuta el programa. Escriba:

run INTRO

(Esta orden pide al ordenador que ejecute el programa que tiene en este momento almacenado en la memoria.) En la pantalla aparece:

Syntax error in 10 
10 printt "abc"

Este mensaje indica en qué línea se ha detectado el error y exhibe la línea con el cursor ya
preparado para que el usuario pueda corregirla.
Lleve el cursor, con la teclari-, hasta una letra t de printt. Pulsei_Ft] para borrar la t que
sobra y luego pulse ANTRO; para introducir la línea corregida en el ordenador.

Escriba ahora:

```basic
run [INTRO]
```

El ordenador ha entendido la instrucción; de hecho, ha escrito en la pantalla: abc


## Parte 4: Carga de programas

La cinta de bienvenida

Encajada en uno de los bloques de poliestireno del embalaje, viene una cinta de demostración. Abra la puerta del magnetófono pulsando el botón [STOP/EJECT]. Inserte el cassette tal como se indica en la figura, con la cara 'SIDE 1' hacia arriba.

![](file:img/cpc464_01_013.png) 

Cierre la puerta hasta que encaje. Pulse el botón [REW] para rebobinar la cinta hasta el principio (si no está ya rebobinada). Cuando se pare la cinta, pulse el botón [STOP/EJECT]. Ponga a 000 el contador pulsando INICIO.

Ahora pulse la tecla de control, [CTRL], y, antes de soltarla, pulse también la tecla [INTRO] pequeña que está en el extremo inferior derecho del teclado numérico. La pantalla responde de la siguiente manera:

RUN"
Press PLAY then any key:

Este último mensaje ("Pulse PLAY y luego cualquier tecla") indica que se debe pulsar el botón [PLAY] del magnetófono y después una tecla cualquiera en el teclado del ordenador. Por "una tecla cualquiera" se debe entender, aquí y en lo sucesivo, cualquier tecla menos las siguientes: [MAYS], [FIJA MAYS], [CTRL] y [ESC].

Hecho esto, la cinta empieza a moverse. Al cabo de unos segundos aparece en la pantalla el siguiente mensaje:


Loading WELCOME 1 block 1


('Cargando WELCOME 1 bloque 1'). El proceso de carga dura unos cinco minutos. Durante este tiempo el número de bloque va cambiando a 2, 3, etc. La ejecución del programa comienza cuando se para la cinta. Observe la demostración. El programa se repite una vez y otra; para detenerlo, pulse [ESC] dos veces. Ahora ya puede pulsar el botón [STOP], sacar la cinta y darle la vuelta.


Antes de cargar el programa de la segunda cara, no olvide rebobinar la cinta (botón [REW]).

Igual que antes, pulse [CTRL] [INTRO] pequeña. En la pantalla aparece otra vez lo siguiente:

RUN"
Press PLAY then any key:

Pulse [PLAY] en el magnetófono y una tecla cualquiera en el teclado del ordenador.

La cinta empieza a moverse. Al cabo de unos segundos aparece en la pantalla el siguiente mensaje:

Loading WELCOME 2 block 1

('Cargando WELCOME 2 bloque 1'). El programa le invitará a participar en la demostración. Siga las instrucciones que le vaya dando.

### Carga de otros programas

Estos dos programas, WELCOME 1 y WELCOME 2, son programas protegidos; esto quiere decir que la única forma de ejecutarlos es la descrita (carga y ejecución inmediata). Sin
embargo, los programas de BASIC no protegidos pueden ser cargados también por los siguientes métodos.

Rebobine la cinta ([REW]) hasta que deje de girar y entonces pulse el botón [STOP/EJECT].

Reinicialice el ordenador: para ello, pulse [CTRL] y [MAYS] y, antes de soltarlas, pulse [ESC]. La pantalla se borra y en ella aparece el mensaje de presentación inicial, exactamente igual que si se acabase de encender el ordenador.

En las siguientes instrucciones, [INTRO] significa que se debe pulsar la tecla [INTRO] al terminar de escribirlas. El símbolo " se obtiene con [MAYS] y la tecla del 2 de la fila superior del teclado.

Escriba lo siguiente:

```basic
load""[INTRO]
```

El ordenador le pide entonces que

```txt
Press PLAY then any key:
```

(Pulse PLAY y luego cualquier tecla'). 

Así pues, pulse el botón [PLAY] del magnetófono, ejerciendo la presión necesaria para que quede encajado. Después pulse una tecla cualquiera en el ordenador.
	
La cinta empieza a moverse y en la pantalla aparece poco después el siguiente mensaje:

Loading (nombre del programa) block 1
('Cargando . bloque ... ). 

El número de bloque aumenta hasta un máximo que depende de la longitud del programa. Cuando se termina de cargar el programa, el ordenador emite el mensaje:


Ready

También se puede especificar el nombre del programa que se desea cargar:

load "(nombre)" [INTRO]	

Nuevamente el ordenador pide que

Press PLAY then any key:

(Pulse PLAY y luego cualquier tecla'). Pulse el botón [PLAY] del magnetófono, ejerciendo la presión necesaria para que quede encajado. Después pulse una tecla cualquiera en el ordenador.

La cinta enpieza a moverse. Si el programa elegido no está al principio, el ordenador continúa examinando la cinta hasta que lo encuentra. Por lo tanto se debe procurar escribir correctamente el nombre del programa.	

Mientras el ordenador está buscando un programa en una cinta, puede ocurrir que encuentre otro distinto. En tal caso informará del hecho mediante el mensaje:

Found (otro nombre) block 1


('Encontrado	') pero no lo cargará, sino que seguirá buscando hasta que encuentre el	solicitado o se pulse la tecla [ESC].	

Cuando encuentra el programa que está buscando, el ordenador emite el mensaje:	

Loading (nombre) block 1	

(`Cargando ... bloque ... '). El número de bloque aumenta hasta que concluye el proceso de carga y en la pantalla aparece el mensaje:

Ready	

Si antes de cargar el programa había algún otro en la memoria, será sustituido por el recién cargado.
Advertencia. Si al intentar cargar un programa se pulsa accidentalmente [REC] (además de [PLAY]) en el magnetófono, éste se pone en modo de grabación, no de lectura, y borra la cinta. Puesto que en esta situación el ordenador no puede encontrar el programa que está buscando, continuará borrando hasta el final
de la cinta o hasta que se pulse la tecla. Le sugerimos que proteja las cintas (después de grabarlas) rompiendo la «pestaña» de plástico que hay en el borde posterior del cassette (una para cada cara).

Una vez cargado el programa por alguno de estos dos últimos procedimientos, para ponerlo en marcha se da la orden:

```basic
run [INTRO]
```

También se puede ordenar la ejecución directa del programa:

```basic
run"" [INTRO]
```

El ordenador responde con el mensaje habitual: Press PLAY then any key:

Una vez pulsado el botón [PLAY] del magnetófono y una tecla cualquiera del teclado, el ordenador carga el primer programa que encuentra en la cinta y lo ejecuta en cuanto termina de cargarlo. El proceso de carga se puede interrumpir en cualquier momento pulsando LESC

### Cintas de programa pregrabadas

Las instrucciones que hemos dado en la sección anterior son aplicables a la carga y ejecución de los programas que el usuario puede adquirir en el comercio grabados en cinta.

No obstante, siempre conviene leer y seguir las instrucciones de carga que se den en el folleto que normalmente acompaña a las citadas cintas.

### Errores de lectura

Si durante la carga de un programa o de un fichero de datos el ordenador emite el mensaje Read error ('error de lectura'), la cinta continúa funcionando y el ordenador sigue leyendo bloques, pero no los carga mientras no encuentre el bloque número 1 del programa que se le había pedido que cargase.

Cuando se produce un error de lectura lo que se debe hacer es parar la cinta ([STOP/EJECT]), rebobinarla ([REW]) y pulsar [PLAY] otra vez. El ordenador hará entonces un nuevo intento.

Los errores de lectura se pueden producir por diversas causas. Por ejemplo, por el deterioro accidental de la cinta o de su superficie sensible o por haber apagado el ordenador estando la cinta en el magnetófono y el botón [PLAY] (o [REC] y [PLAY]) pulsado.

En efecto, cuando está pulsado este botón, la cinta está presionada contra la cabeza grabadora; al apagar el ordenador y descargarse la fuente de alimentación, puede pasar un impulso eléctrico hacia la cinta a través de la cabeza. Aunque la cinta esté parada, ese impulso (lo mismo que el que se produce al encender el ordenador) puede alterar la información que está grabada en la cinta. Por otra parte, la cinta puede deformarse si se la deja demasiado tiempo oprimida entre el eje de arrastre y la rueda de caucho.

Los errores de lectura también se pueden producir si se pulsa [PAUSE] durante la lectura (o si se pulsó este botón durante la grabación), o si la cinta ha sido grabada en otro CPC464 en el que la cabeza grabadora estuviera mal alineada.

Finalmente, a veces se presentan errores de lectura sin causa aparente. La cinta de cassette no fue diseñada originalmente como medio de almacenamiento de datos digitales, y por lo tanto no es perfecta en esta aplicación. Hay razones físicas que limitan la velocidad a la que se puede grabar datos en la cinta. Si se intenta sobrepasar esa velocidad máxima (por ejemplo, en los métodos de duplicación masiva de cintas de programas de bajo precio), las grabaciones dejan de ser fiables.

Nota. Las cintas grabadas por o para ordenadores de otras marcas no pueden ser leídas por el CPC464. Pueden tener el mismo aspecto externo, e incluso producir los mismos ruidos cuando se las reproduce en un sistema de audio, pero los datos estarán grabados con un formato incompatible en el CPC464.

### Catálogo de los ficheros de la cinta

La orden CAT hace que el ordenador examine la cinta y dé una lista de los ficheros que encuentra en ella. La forma es la siguiente:

```basic
CAT [INTRO]
```

```txt
Press PLAY then any key:
```

La lista consiste en los nombres de los ficheros, seguido cada uno por el número de bloques de que consta y por un carácter que indica la naturaleza del fichero:

 * $ para programas de BASIC en forma estándar 
 
 * % para programas de BASIC protegidos 
 
 * \* para ficheros de texto ASCII
 
 * & para ficheros binarios

El mensaje Ok al final de cada línea indica que el fichero es legible y que el ordenador habría podido cargarlo si lo hubiese intentado.

La obtención del catálogo con CAT no afecta en absoluto al programa que pueda haber en la memoria del ordenador.


## Parte 5: Empecemos a trabajar ...

A estas alturas ya sabemos qué podemos y qué no podemos hacer con el ordenador, así como la forma de conectarle periféricos. Sabemos para qué sirven algunas teclas del ordenador y cómo cargar programas. Ahora vamos a ver algunas de la órdenes e instrucciones que usted puede teclear para que empiecen a ocurrir cosas...

Al ordenador le ocurre lo que a los humanos: sólo puede entender instrucciones que se le dan en el lenguaje que él conoce. En el caso del ordenador, ese lenguaje es BASIC (siglas de Beginners' All-purpose Symbolic Instruction Code, 'código de instrucciones simbólicas de uso general para principiantes'). Las palabras del vocabulario de BASIC son las llamadas 'palabras clave', 'palabras reservadas' o 'palabras de instrucción'. Cada una de ellas ordena a la máquina que realice una determinada función. Todos los lenguajes tienen sus reglas gramaticales, y BASIC no es la excepción. Aquí, el concepto de gramática se reduce al de 'sintaxis'; de ahí que el ordenador tenga la amabilidad de decirnos de vez en cuando que hemos cometido un error de sintaxis: Syntax error.

### Introducción a las palabras clave del BASIC de AMSTRAD

En el tercer capítulo, titulado 'Lista completa de las palabras clave del BASIC de AMSTRAD', daremos una descripción de todas las palabras del dialecto de BASIC que entiende este ordenador. En esta sección vamos a presentar sólo las que se utilizan con mayor frecuencia.

#### CLS

Para borrar la pantalla escriba:

cls [INTRO]

Como puede observar, la pantalla efectivamente se borra y en su extremo superior izquierdo aparecen la palabra Ready y el cursor ∎.

Para introducir palabras clave de BASIC valen tanto las letras mayúsculas como las minúsculas.

#### PRINT

Esta instrucción sirve para hacer que el ordenador escriba en la pantalla caracteres sueltos, palabras completas, frases o números. Teclee la siguiente orden:

```basic
print "hola" [INTRO]
```

En la pantalla puede ver:

```txt
hola 
```

Las comillas "" indican al ordenador qué es lo que debe escribir. La palabra hola apareció en la pantalla en cuanto se pulsó [INTRO]. Teclee

```basic
cls [INTRO]
```

para borrar la pantalla.

#### RUN

En el ejemplo anterior hemos visto cómo obedece el ordenador una orden directa. Pero esto no siempre es deseable, ya que el ordenador olvida la orden inmediatamente después de ejecutarla. Podemos almacenar en la memoria del ordenador una sucesión de instrucciones para que más tarde sean ejecutadas en un orden determinado. Tal sucesión de instrucciones constituirá un programa. Las instrucciones de BASIC que podemos incluir en un programa tienen la forma que hemos visto, pero van precedidas de un número de línea. Si el programa consta de más de una instrucción, los números de línea indican al ordenador en qué orden debe ejecutarlas. Cuando después de teclear una línea de instrucción se pulsa [INTRO], la línea queda almacenada en la memoria hasta que pidamos al ordenador que ejecute el programa. Escriba lo siguiente:

```basic
10 print "hola" [INTRO]
```

Observe que en este caso, aunque ha pulsado [INTRO], la palabra hola no ha aparecido en la pantalla, sino que ha quedado almacenada en la memoria del ordenador, incluida en la línea de programa. Para ejecutar este pequeño programa debemos dar al ordenador la orden directa run. Escriba

```basic
run [INTRO]
```

Ahora sí aparece la palabra hola en la pantalla.

Observe algo interesante: en lugar de escribir la palabra print completa, basta con teclear el signo de interrogación ?; por ejemplo,

```basic
10 ? "hola" [INTRO]
```



#### LIST

Cuando se tiene un programa almacenado en la memoria, se puede comprobar su contenido haciendo un "listado". Escriba
list [INTRO]
En la pantalla aparece
10 PRINT "hola" 
que es la única línea de nuestro programa.

Observe que ahora la palabra PRINT está en mayúsculas. Esto nos indica que el ordenador ha reconocido PRINT como palabra clave de BASIC.

Escriba cls [INTRO] para borrar la pantalla. Observe que, aunque se ha borrado el texto que había en la pantalla, el programa sigue estando en la memoria del ordenador.

#### GOTO

Esta instrucción pide al ordenador que salte de la línea actual a la línea especificada, para no ejecutar un grupo de instrucciones, si el salto es hacia delante, o para formar un bucle, si el salto es hacia atrás. Escriba

```basic
10 print "hola" [INTRO]
20 goto 10 [INTRO]
```

y luego

```basic
run [INTRO]
```

Como puede ver, el ordenador escribe repetidamente la palabra hola, a la izquierda de la pantalla, pasando cada vez a la línea siguiente. La razón es que, al llegar a la línea 20, la instrucción goto 10 provoca un salto a la línea 10.

Para detener el programa, pulse [ESC] una vez. Para reanudarlo, pulse cualquier otra tecla. Para detenerlo definitivamente, de forma que se pueda introducir otras instrucciones, pulse [ESC] dos veces.

Escriba ahora

```basic
cls [INTRO]
```

para borrar la pantalla.

Para inhibir el salto a la línea siguiente de la pantalla cada vez que el ordenador escriba hola, introduzca nuevamente el programa anterior, pero poniendo ahora un signo de punto y coma (;) al final de las comillas:

```basic
10 print "hola"; [INTRO]
20 goto 10 [INTRO]
run [INTRO]
```

El punto y coma indica al ordenador que debe escribir el siguiente grupo de caracteres inmediatamente a la derecha del anterior (suponiendo que quepan en la misma línea).

Para detener este programa pulse [ESC] dos veces. Escriba otra vez la línea 10, pero poniendo una coma (,) en lugar del punto y coma (;):

```basic
10 print "hola", [INTRO]
run [INTRO]
```

Como puede observar, la coma ha indicado al ordenador que escriba el siguiente grupo de caracteres 13 posiciones a la derecha del lugar en que empezó a escribir el anterior. Esta función es útil cuando se quiere visualizar información en columnas. No obstante, si el número de caracteres del grupo es mayor que 12, la escritura empezará otras 13 posiciones más a la derecha, de forma que entre columnas siempre quedará algún espacio.

Este número, 13, es modificable con la instrucción ZONE, que describiremos más adelante.

Para detener este programa, pulse [ESC] dos veces. Para borrar completamente la memoria del ordenador, pulse las teclas [CTRL] y [MAYS] y, antes de soltarlas, pulse [ESC].

#### INPUT

Esta instrucción hace que el ordenador quede a la espera de que el usuario introduzca información por el teclado; por ejemplo, en respuesta a alguna pregunta.

Escriba lo siguiente:

```basic
10 input "cuantos años tienes";edad [INTRO]
20 print "pues no aparentas tener";edad;"años" [INTRO]
run [INTRO]
```basic

En la pantalla aparece la pregunta:

```txt
cuantos años tienes? 
```

Escriba su edad y pulse [INTRO]. Si, por ejemplo, su edad es 18 años, el programa escribe lo siguiente:

```txt
pues no aparentas tener 18 años 
```

Este ejemplo ilustra la utilización de input combinada con una variable numérica. Hemos puesto la palabra edad al final de la línea 10, y por consiguiente en la memoria, para que el ordenador pueda asociarla al número que el usuario introduzca; después, en la línea 20, en lugar de edad escribirá ese número. Nada nos obligaba a elegir precisamente ese nombre, edad, y podíamos haber utilizado una letra cualquiera, por ejemplo, b.

Reinicialice el ordenador para borrar la memoria (teclas [CTRL] [MAYS] [ESC]. Si queremos captar por el teclado una respuesta que esté formada por caracteres cualesquiera (letras so las o letras mezcladas con números), debemos poner el signo de dólar ($) al final del nombre de la variable. Las variables de este tipo son las que denominamos variables literales.

Escriba el siguiente programa (observe que en la línea 20 hay que poner un espacio después de la primera coma, pero no antes de la segunda):

```basic
10 input "como te llamas";nombre$ [INTRO]
20 print "hola, ";nombre$;", yo me llamo Rolando" [INTRO]
run [INTRO]
```
En la pantalla puede ver:

como te llamas?
Escriba su nombre y luego pulse [INTRO]. Si el nombre introducido es, por ejemplo, Manolo, el programa escribe:
hola, Manolo, yo me llamo Rolando

En este caso hemos usado nombre$ como nombre de la variable literal, pero perfectamente podríamos haber elegido una letra cualquiera, por ejemplo, a$. Vamos a combinar los dos ejemplos anteriores en un solo programa. Reinicialice la máquina con [CTRL] [MAYS] [ESC]. Escriba lo siguiente:

```basic
5 cls [INTRO]
10 input "como te llamas";a$ [INTRO]
20 input "cuantos años tienes";b [INTRO]
30 print "desde luego, ";a$;", no aparentas tener";b;"años" [INTRO]
run [INTRO]
```

En este programa hemos utilizado dos variables: a$ para representar el nombre y b para representar la edad. En la pantalla aparece la primera pregunta:
como te llamas?
Escriba su nombre (supongamos que es Manolo) y luego pulse [INTRO]. El ordenador le pregunta ahora:
cuantos años tienes?
Escriba su edad (supongamos que es 18 años) y luego pulse [INTRO].

Si lo que hemos supuesto es cierto, en la pantalla aparecerá la siguiente frase:
desde luego, Manolo, no aparentas tener 18 años

### Edición de programas

Si alguna de las líneas del programa anterior hubiera sido mecanografiada incorrectamente, lo que podría provocar el mensaje de error Syntax error o algún otro, en lugar de escribirla de nuevo es posible corregirla ("editarla" es como se dice en informática). Para ilustrar cómo hacerlo, vamos a escribir incorrectamente el programa:

```basic
5 clss [INTRO]
10 input "como t llamas";a$ [INTRO]
20 input "cuantos años tienes";b [INTRO]
30 print "desde luego,";a$;", no aparentas tener";b;"años" [INTRO]
```

En este programa hay tres errores:

 * En la línea 5 hemos escrito clss en lugar de cls.

 * En la línea 10 hemos escrito t en lugar de te.

 * En la línea 30 hemos olvidado poner un espacio entre la coma y el signo de cerrar comillas.

Hay tres métodos para corregir un programa. El primero consiste en escribir nuevamente la línea errónea. Al hacerlo, la línea nueva sustituye a la que había en la memoria con el mismo número.

El segundo es el "método del cursor de edición".

El tercero es el "método del cursor de copia".


#### Método del cursor de edición

Vamos a corregir el error de la línea 5.

Escriba lo siguiente:

```basic
edit 5 [INTRO]
```

En la pantalla aparece la línea 5, por debajo de la 30, con el cursor situado sobre la c de clss.

Para suprimir la s que sobra, pulse la tecla de movimiento del cursor hasta que éste quede sobre la última s de clss; pulse la tecla [CLR] y observe como desaparece la s. A continuación pulse [INTRO] para introducir la versión corregida de la línea 5 en la memoria. Escriba

```basic
list [INTRO]
```

y comprobará que la línea ha quedado corregida.

#### Método del cursor de copia

El cursor de copia es un segundo cursor, distinto del que puede ver en este momento en la pantalla, que aparece cuando se pulsa [MAYS] en combinación con alguna de las teclas de movimiento del cursor. De esta forma, el cursor de copia se separa del cursor ordinario y puede ser llevado a cualquier lugar de la pantalla.

Para corregir los errores de las líneas 10 y 30, pulse la tecla [MAYS] y, sin soltarla, pulse [↑] hasta llevar el cursor de copia al principio de la línea 10. Observe que el cursor principal no se ha movido, por lo que hay dos cursores en la pantalla. Ahora pulse varias veces [COPIA] hasta que el cursor de copia esté sobre el espacio que hay entre la t y la palabra llamas. Observe que el principio de la línea 10 ha sido copiado en la última línea de la pantalla y que el cursor principal se ha detenido en la misma columna que el de copia. Escriba la letra e, que aparecerá solamente en la línea inferior.

El cursor ordinario se ha movido, pero el de copia se ha quedado donde estaba. Pulse ahora [COPIA] hasta completar la copia de la línea 10. Pulse [INTRO] para transferir esta versión de la línea 10 a la memoria. El cursor de copia desaparece y el cursor ordinario queda por de bajo de la nueva línea 10.

Para corregir el otro error, mantenga pulsada la tecla [MAYS] y lleve el cursor de copia con la tecla [↑] hasta el principio de la línea 30. Pulse [COPIA] hasta que el cursor de copia quede sobre las comillas que siguen a la coma. Pulse la barra espaciadora una vez, con lo que se inserta un espacio en la línea nueva. Pulse [COPIA] y no la suelte hasta que haya terminado de copiar el resto de la línea 30; pulse entonces [INTRO].

Compruebe que el programa ha quedado correctamente almacenado en la memoria escribiendo:

```basic
list [INTRO]
```

Nota

Para llevar el cursor (durante el proceso de edición) al principio o al final de una línea, pulse la tecla [←] o la [→] una vez manteniendo pulsada al mismo tiempo la tecla [CTRL].

Reinicialice el ordenador con [CTRL] [MAYS] [ESC].

#### IF

Las palabras clave IF (si) y THEN (entonces) se combinan para hacer que el ordenador realice una determinada acción en función del resultado de una comprobación especificada. Por ejemplo, en la instrucción

```basic
if 1+1=2 then print "correcto" [INTRO]
```

el ordenador comprueba si es cierto que 1+1=2 y obra en consecuencia.

La palabra clave ELSE (si no) da un segundo curso de acción para el caso de que la comprobación de como resultado "falso" (o sea, que la condición no se cumpla). Por ejemplo,

```basic
if 1+1=0 then print "correcto" else print "falso" [INTRO]
```

Vamos a ampliar nuestro programa anterior con la instrucción IF ... THEN. 

Escriba lo siguiente:

```basic
5 cls [INTRO]
10 input "como te llamas";a$ [INTRO]
20 input "cuantos años tienes";edad [INTRO]
30 if edad < 13 then 60 [INTRO]
40 if edad < 20 then 70 [INTRO]
50 if edad > 19 then 80 [INTRO]
60 print "Bueno,";a$;", todavia no eres un adolescente a los";edad; "años":end [INTRO]
70 print "Bueno, ";a$;", a tus";edad;"años eres un adolescente":end [INTRO]
80 print "Que le vamos a hacer, ";a$;", ya no eres un adolescente a tus";edad;"años" [INTRO]
```

(Observe que hemos introducido dos símbolos nuevos: <, que significa "menor que", y >, que significa "mayor que".) Para comprobar que el programa ha quedado correctamente introducido en la memoria escriba

```basic
list [INTRO]
```

y a continuación

```basic
run [INTRO]
```

Responda a las preguntas que le haga el ordenador y vea qué ocurre.

En este ejemplo puede observar el efecto de la instrucción IF ... THEN. También hemos introducido una palabra clave nueva: END (fin); su efecto es concluir la ejecución del programa. Si no estuviera END en la línea 60, el programa continuaría en la línea 70. Por lo mismo, si no hubiéramos puesto END en la línea 70, el programa no terminaría en ella, sino que ejecutaría también la 80. El signo de dos puntos (:) que precede a la palabra END separa esta palabra de la instrucción anterior. Este signo se puede utilizar para separar instrucciones cuando interese poner varias en una misma línea de programa. También hemos incluido la línea 5, en la que borramos la pantalla. En lo sucesivo seguiremos haciéndolo, para obtener programas más "elegantes" y evitar confusiones.

Reinicialice la máquina pulsando las teclas [CTRL] [MAYS] [ESC].


#### FOR ... NEXT

Estas palabras clave se utilizan cuando se desea que una parte del programa se repita cierto número de veces. Las instrucciones que deban repetirse son las que se incluyen dentro del bucle FOR ... NEXT (para ... siguiente).

Escriba lo siguiente:

```basic
5 cls [INTRO]
10 for a=1 to 10 [INTRO]
20 print "operacion numero:";a [INTRO]
30 next a [INTRO]
run INTRO 
```

Como puede ver, la acción de la línea 20 ha sido realizada 10 veces, tal como exige la instrucción FOR de la línea 10. Observe también cómo se ha ido incrementando de 1 en 1 la variable a.

La palabra clave STEP (paso) se puede incluir en la instrucción FOR ... NEXT para especificar la forma en que debe incrementarse o decrementarse la variable de control del bucle. Por ejemplo, modifique la línea 10 y ejecute el programa:

```basic
10 for a=10 to 50 step 5 [INTRO]
run [INTRO]
```

#### REM

REM es abreviatura de REMark (observación, comentario). Esta instrucción indica al ordenador que debe ignorar todo lo que haya después de ella en la línea de programa. Sirve, pues, para hacer anotaciones al programa; por ejemplo, el título, el significado de una variable, etc.:

```basic
10 REM Fulminar los invasores [INTRO]
20 S=5:REM numero de supervivientes [INTRO]
```

El signo de comilla ' (que se obtiene de la tecla del 7 con [MAYS] es a su vez abreviatura de :REM. Por ejemplo,

```basic
10 'Fulminar los invasores [INTRO]
20 S=5 'numero de supervivientes [INTRO]
```

#### GOSUB

Si en un programa hay un grupo de instrucciones que deban ser ejecutadas varias veces, no es necesario escribirlas reiteradamente cada vez que el programa las necesite. Lo que se hace es ponerlas en una "subrutina", la cual puede ser invocada siempre que se desee mediante la instrucción GOSUB (ir a subrutina) seguida del número de la línea donde empieza la subrutina. El final de la subrutina se señala con la instrucción RETURN (retorno). Cuando el programa llega a RETURN, la ejecución salta a la instrucción siguiente al GOSUB que invocó la subrutina.

(Los dos programas siguientes no hacen más que escribir la letra de una canción popular en la pantalla, y por lo tanto no es necesario que se tome la molestia de introducirlos en el ordenador. Los hemos incluido aquí solamente para demostrar cómo se pueden utilizar las subrutinas para realizar tareas repetidas.) En el siguiente programa:

```basic
10 MODE 2 [INTRO]
20 PRINT "Dicen que no la quieres y la regalas" [INTRO]
30 PRINT "Peritas de Don Guindo y uvas tempranas" [INTRO]
40 PRINT "Al tribulete" [INTRO]
50 PRINT "Que no quiere bailar con usted" [INTRO]
60 PRINT "Dejala, dejala sola" [INTRO]
70 PRINT [INTRO]
80 PRINT "Es tu cara lo mismo que luna blanca" [INTRO]
90 PRINT "Y tus ojos luceros que la acompañan" [INTRO]
100 PRINT "Al tribulete" [INTRO]
110 PRINT "Que no quiere bailar con usted" [INTRO]
120 PRINT "Dejala, dejala sola" [INTRO]
130 PRINT [INTRO]
140 PRINT "Tengo yo comparado, niña, tu rostro" [INTRO]
150 PRINT "Con la luna de enero y el sol de agosto" [INTRO]
180 PRINT "Al tribulete" [INTRO]
190 PRINT "Que no quiere bailar con usted" [INTRO]
200 PRINT "Dejala, dejala sola" [INTRO]
210 PRINT [INTRO]
run [INTRO]
```

puede observar que hemos repetido varias instrucciones. Por ejemplo, la línea 40 (principio del estribillo) está repetida en la 100 y en la 180. Pongamos todo el estribillo en una subrutina, con [RETURN] al final; entonces podremos "llamarlo" con la instrucción GOSUB 180 cada vez que lo necesitemos. El programa queda de la siguiente forma:

```basic
10 MODE 2 [INTRO]
20 PRINT "Dicen que no la quieres y la regalas" [INTRO]
30 PRINT "Peritas de Don Guindo y uvas tempranas" [INTRO]
40 GOSUB 180 [INTRO]
80 PRINT "Es tu cara lo mismo que luna blanca" [INTRO]
90 PRINT "Y tus ojos luceros que la acompañan" [INTRO]
100 GOSUB 180 [INTRO]
140 PRINT "Tengo yo comparado, niña, tu rostro" [INTRO]
150 PRINT "Con la luna de enero y el sol de agosto" [INTRO]
170 END [INTRO]
180 PRINT "Al tribulete" [INTRO]
190 PRINT "Que no quiere bailar con usted" [INTRO]
200 PRINT "Dejala, dejala sola" [INTRO]
210 PRINT [INTRO]
220 RETURN [INTRO]
run [INTRO] 
```

El ahorro de trabajo es evidente. El correcto diseño de subrutinas es una faceta esencial de la informática. Con ellas se puede escribir programas "estructurados"; son la base para la adquisición de buenos hábitos de programación.

Cuando escriba subrutinas, tenga en cuenta que no está obligado a saltar siempre a su primera línea. Por ejemplo, si hay una rutina en las líneas 500 a 800, podría interesar llamarla con GOSUB 500, con GOSUB 640 o con GOSUB 790, según las funciones de la subrutina que se desee ejecutar.

Observe que en el programa anterior hemos incluido la instrucción END en la línea 170 para aislar la subrutina del resto del programa. De no haberlo hecho, el programa pasaría de la línea 160 a la 180.

#### Aritmética sencilla

El ordenador se puede utilizar como calculadora.

Para aprender cómo hacerlo, pruebe los siguientes ejemplos. En esta sección utilizamos el signo de interrogación ? como abreviatura de print. El ordenador escribe la respuesta en cuanto se pulsa [INTRO].

##### Suma

Escriba

```txt
?3+3 [INTRO]
6
```

(No se teclea el signo = ).

Escriba:

```txt
?8+4 [INTRO]
12
```

##### Resta

(no confunda el signo menos "-" con el de subrayado "_").

Escriba:

```txt
?4-3 [INTRO]
1
```

Escriba:

```txt
?8-4 [INTRO]
4
```

##### Multiplicación

(el signo de multiplicación es el asterisco \*).

Escriba:

```txt
?3*3 [INTRO]
9
```

Escriba:

```txt
?8*4 [INTRO]
32
```

##### División

(el signo de dividir es la barra inclinada hacia la derecha, /).

Escriba:

```txt
?3/3 [INTRO]
1
```
Escriba:

```txt
?8/4 [INTRO]
2
```

##### División entera

(es la división en la que se ignora el resto; su signo es la barra inclinada hacia la izquierda \).

Escriba:

```txt
?10\6 [INTRO]
1
```
Escriba:

```txt
?20\3 [INTRO]
6
```

##### Módulo

(la operación MOD da el resto de la división entera).

Escriba:

```basic
?10 MOD 4 [INTRO]
2
```

Escriba:

```
?9 MOD 3 [INTRO]
0
```

##### Raíz cuadrada

Para hallar la raíz cuadrada de un número se utiliza la función sqr( ). El número del que se va a extraer la raíz (esto es, el radicando) se pone entre los paréntesis. Escriba:
?sqr(16) [INTRO]
4
(esto significa √16).

Escriba:
?sqr(100) [INTRO]
10

##### Potenciación

(en los ordenadores el signo de "elevar a una potencia" es la flecha hacia arriba, que en el AMSTRAD se obtiene de la tecla de [Pt] sin [MAYS]).

La potenciación es la operación de elevar un número a una potencia; es decir, multiplicarlo por sí mismo tantas veces como indica el exponente. Por ejemplo, 3 al cuadrado (3^2), 3 al cubo (3^3), 3 a la cuarta (3^4), etc.

Escriba (sustituya el carácter ^ por ↑):
?3^3 [INTRO]
27
(esto significa 3^3).

Escriba (sustituya el carácter ^ por ↑):
?8^4 [INTRO]
4096
(esto significa 8^4).

##### Raíz cúbica

Extraer la raíz cúbica de un número es lo mismo que elevarlo a la potencia 1/3. Así, para hallar la raíz cúbica de 27 (∛27) escriba (sustituya el carácter ^ por ↑):
?27^(1/3) [INTRO]
33
Para hallar la raíz cúbica de ∛125 escriba (sustituya el carácter ^ por ↑):
?125^(1/3) [INTRO]
5

##### Operaciones combinadas

El ordenador entiende correctamente las operaciones combinadas, pero es necesario saber con qué orden de prioridad las realiza.

La primera prioridad es para la multiplicación y la división; la segunda, para la suma y la resta. Este orden de prioridad es válido solamente para los cálculos en los que no intervienen más que estas operaciones. Si la operación fuera:

```txt
3+7–2*7/4
```

se podría pensar que el ordenador la realizaría de la forma:

```txt
3+7-2 *7/4

=8 *7/4

=56/4

=14
```

Sin embargo, el proceso de cálculo es como sigue:

3+7–2*7/4

=3+7-14/4

=3+7–3.5

= 10–3.5

=6.5

Compruébelo escribiendo

```basic
?3+7-2*7/4 [INTRO]
6.5
```

Para alterar este orden se pueden incluir paréntesis según convenga. El ordenador realiza las operaciones internas a los paréntesis antes que las externas. Compruébelo escribiendo lo siguiente:

```basic
?(3+7-2)* 7/4 [INTRO]
14
```

El orden completo de prioridad de las operaciones matemáticas es el siguiente:

  * ↑ Potenciación 
  * MOD Módulo 
  * - Cambio de signo 
  * \* y / Multiplicación y división 
  * \\ División entera 
  * + y - Suma y resta 

##### Más exponentes

Cuando en los cálculos van a intervenir números muy grandes o muy pequeños, es conveniente a veces utilizar notación científica. La letra E (mayúscula o minúscula) indica que el número que está a su derecha es una potencia de 10.

Por ejemplo, 300 es lo mismo que 3 x 10^2. En notación científica escribiríamos 3E2. Análogamente, 0.03 es igual a 3x10^-2; en notación científica, 3E-2. Pruebe los siguientes ejemplos.

Puede escribir

```basic
?30*30 [INTRO]
300
```

o bien

```basic
?3E1*1E1 [INTRO]
300 
```

?3000*1000 [INTRO] ... o bien ... ?3E3*1E3 [INTRO]
?3000*0.001 [INTRO] ... o bien ... ?3E3*1E-3 [INTRO]
3
 
## Parte 6: Grábelo en cinta ...

La memoria interna del CPC464 sólo puede "recordar" los datos mientras el ordenador está encendido; en terminología informática, es un medio de almacenamiento "volátil". Para que la información no se pierda cuando se apague la máquina, es necesario grabar los programas y los datos en un medio "no volátil", tal como la cinta o el disco (mediante la unidad de disco opcinal DDI-1).

Los programas se graban en la cinta con la orden save. Su forma más sencilla es la siguiente:

```basic
save "<nombre del programa>" [INTRO]
```

El ordenador responde con el mensaje

```txt
Press REC and PLAY then any key:
```

Este mensaje ("Pulse REC y PLAY y luego cualquier tecla") indica que se debe pulsar los botones [REC] y [PLAY] del magnetófono y después una tecla cualquiera en el teclado del ordenador. Por "una tecla cualquiera" se debe entender cualquier tecla menos las siguientes: [MAYS], [FIJA MAYS], [CTRL] y [ESC].

Hecho esto, la cinta empieza a moverse. Al cabo de unos segundos aparece en la pantalla el siguiente mensaje:

```txt
Saving <nombre del programa> block 1 
```

(“Grabando ... bloque 1'). Cuando concluye la grabación, la cinta se detiene automática mente y aparece en la pantalla el mensaje Ready. Pulse el botón [STOP/EJECT] del magnetófono para liberar la cinta.

Nota.

El ordenador no tiene forma de saber si el usuario efectivamente ha pulsado los dos botones en el magnetófono. Por eso, si no los pulsa, o si sólo pulsa [PLAY], el programa no quedará grabado.

Hay otras versiones de save que permiten grabar programas de BASIC en forma protegida, fichero de textos ASCII y ficheros binarios. Todas ellas están descritas en el {Capítulo 3}.

#### Velocidades de grabación

El CPC464 puede grabar y leer las cintas a dos velocidades: en la velocidad normal la transferencia de datos se realiza a 1000 baudios; en la velocidad alta, a 2000 baudios.

Así pues, en velocidad alta la grabación y la lectura se realizan en la mitad de tiempo que en velocidad normal, pero se pierde el margen de seguridad que a veces es imprescindible cuando se trabaja con cintas de baja calidad o cuando la grabación y la lectura se realizan en ordenadores distintos y alguno de ellos tiene mal alineada la cabeza lectora/grabadora.

Si los programas se van a leer en la misma máquina que los graba, la alta velocidad es adecuada, siempre que las cintas no sean de calidad demasiado baja.

Si no se especifica otra cosa, el ordenador graba en velocidad normal. La orden

```basic
SPEED WRITE 1 
```

selecciona velocidad alta. Para volver a velocidad normal se da la orden:

```basic
SPEED WRITE O 
```

Cuando carga un programa, el ordenador detecta a qué velocidad ha sido grabado y selecciona automáticamente la velocidad de lectura.
             
 
## Parte 7: Introducción a los modos de pantalla, colores y gráficos

El AMSTRAD CPC464 puede funcionar en tres modos de pantalla: modo 0, modo 1 y modo 2.

Al encenderlo, el ordenador selecciona automáticamente el modo 1.

Para apreciar las diferencias entre los tres modos, encienda el ordenador y pulse la tecla del 1. Manténgala pulsada hasta que se hayan llenado dos líneas de pantalla. Si cuenta los unos, observará que hay 40 en cada línea. Esto quiere decir que en modo 1 la pantalla tiene 40 columnas. Pulse LINTRO 1: el ordenador responderá con un mensaje de Syntax error, pero no se preocupe; ésta es una forma rápida de obtener nuevamente el mensaje Ready, que indica que el ordenador está preparado para recibir nuestras instrucciones.

Escriba ahora:

mode O »ano!

Observará que ahora los caracteres son más grandes. Pulse otra vez la tecla del 1 y no la suelte hasta que se hayan llenado dos líneas de la pantalla. Compruebe que ahora hay 20 unos por línea. Esto significa que en modo O la pantalla tiene 20 columnas. Pulse nuevamente ir INTRO 1 y luego escriba:

mode 2 INTRO 1

Observe que ahora los caracteres son muy pequeños. Puede comprobar que en modo 2 la pantalla tiene 80 columnas.

Resumiendo,
Modo O —^ 20 columnas Modo 1 —^ 40 columnas Modo 2 —+ 80 columnas

Finalmente, vuelva a pulsar 1INTRO 1

### Colores

Este ordenador puede manejar 27 colores. En el monitor de fósforo verde (GT64) aparecen como distintas gradaciones de verde. Si usted adquirió el sistema con el monitor GT64, en cualquier momento puede comprar la unidad modulador/fuente de alimentación MP I, con la que podrá disfrutar de los colores del ordenador conectándolo a un televisor doméstico.

En modo O se puede visualizar simultáneamente 16 de los 27 colores disponibles. En modo 1 se puede visualizar simultáneamente 4 de los 27 colores. En modo 2 se puede visualizar simultáneamente 2 de los 27 colores.

Se puede controlar los colores del borde, del papel (fondo) y de la pluma (trazo) independientemente unos de otros.

Los 27 colores disponibles son los relacionados en la tabla 1, en la que incluimos también los números de referencia para la instrucción INK (tinta).

Para mayor comodidad, esta tabla aparece también en la carcasa del ordenador, al lado derecho.

Número	Número		Número	
de tinta	Color	de tinta	Color	de tinta	Color
0	Negro	9	Verde	18	Verde intenso
1	Azul	10	Cyan	19	Verde mar
2	Azul intenso	11	Azul celeste	20	Cyan intenso
3	Rojo	12	Amarillo	21	Verde lima
4	Magenta	13	Blanco	22	Verde pastel
5	Malva	14	Azul pastel	23	Cyan pastel
6	Rojo intenso	15	Anaranjado	24	Amarillo intenso
7	Morado	16	Rosado	25	Amarillo pastel
8	Magenta intenso	17	Magenta pastel	26	Blanco intenso
Tabla 1. Números de tinta y colores asociados.

Como hemos dicho, el ordenador se pone automáticamente en modo 1 al encenderlo. Para volver a modo 1 estando en cualquier otro, basta con escribir:
mode 1 iTNTRol

### La pantalla

El borde (BORDER) es el área que rodea el papel (PAPER). (Cuando se enciende el ordenador, el borde y el papel son ambos azules.) Los caracteres que escribimos en la pantalla sólo puede estar en la región interior al borde. El papel es el fondo sobre el que la pluma (PEN) escribe los caracteres.
Vamos a explicar cómo se realiza la selección de los colores.
Cuando se enciende o reinicializa el ordenador, éste selecciona automáticamente el color número 1 para el borde. Como puede comprobar en la tabla 1, el color número 1 es el azul.
	
.'""	
005IC	
4..e„	
	'''''llg roo :::t1 . VE:›Y:WratV
	1.0
	II
	
A MS111A0	
PEN
BORDER PAPER
El color del borde se puede cambiar mediante la orden BORDER seguida del número del color deseado. Por ejemplo, escriba:
border 13 INTROI
Esto es fácil, pero en el interior de la pantalla las cosas son algo más complicadas:
Cuando se enciende o reinicializa la máquina, el número de papel seleccionado automáticamene es el O, y el de la pluma es el 1. Esto no quiere decir que los colores correspondientes sean los que figuran en la tabla anterior con los números O y 1.
Lo que ocurre es que el O y el 1 son números de papel y de pluma, no números de tinta. Vamos a explicarnos. Supongamos que tenemos en nuestra mesa cuatro plumas, numeradas del O al 3, y 27 tinteros, numerados del 0 al 26. Es evidente que cuando decimos 'pluma número 1' no necesariamente estamos refiriéndonos al color número 1. La pluma número 1 puede estar cargada con tinta de cualquier color; de hecho, podemos tener las cuatro plumas cargadas con la misma tinta.
Pues bien, algo similar ocurre en el ordenador. Con la instrucción PEN (pluma) podemos elegir la pluma con la que vamos a escribir; la instrucción INK (tinta) nos permite 'cargar' esa pluma con tinta del color deseado.
Recordando que estamos en modo 1 (40 columnas), consulte la tabla 2 y comprobará que la pluma número 1 está cargada inicialmente con tinta de color 24. Pero el color 24 es, como podemos ver en la tabla 1, amarillo intenso: el color con que se escriben los caracteres cuando acabamos de encender el ordenador.
Las relaciones entre papel, pluma y tinta no son fijas. Los valores que se muestran en la tabla 2 son los seleccionados automáticamente en el momento de encender la máquina. Se los puede cambiar mediante la instrucción INK (tinta). Esta instrucción va seguida de dos números (parámetros). El primero es el número de papel o de pluma que vamos a cargar; el segundo es el color con que vamos a cargarlo. Los parámetros van separados por una coma.

Número de	Color de tinta	Color de tinta	Color de tinta
	papel/pluma	Modo 0	Modo 1	Modo 2
	0	
		1	1	1
1	24	24	24
	2	20	20	1
3	6	6	24
li	4	26	1	1
	5	0	24	24
e	6	2	20	1
	7	8	6	24
ID	8	10	1	1
III	9	12	24	24
	10	14	20	1
III	11	16	6	24
	12	18	1	1
13	22	24	24
ID	14	Parpadeo 1,24	20	1
	15	Parpadeo 16,11	6	24

Tabla 2. Asignación inicial de tintas a los papeles y las plumas.
pondiente: la cargaremos con tinta de color anaranjado. Escriba:
Puesto que estamos utilizando la pluma número 1, vamos a cambiar el color de tinta corres-
ink 1,15 [INTRO1

Los caracteres han cambiado instantáneamente de color.
También vamos a cambiar el color del fondo mediante la instrucción INK. Sabemos que el número de papel seleccionado al encender la máquina es el O; vamos a cambiar el color a verde (color número 9) escribiendo:
ink 0,9 ANTRO Ahora vamos a cambiar de pluma. Escriba:
e
pen 3 V§~) 
El color de los caracteres ya escritos no ha cambiado. Esta instrucción afecta solamente a los que escribamos a continuación. En este momento estamos utilizando la pluma número 3. Como puede comprobar en las tablas 1 y 2, la tinta con que esta pluma está cargada
inicialmente es la de color número 6 (rojo intenso). Para cambiarla a rosado escriba:
ink 3.16 1INTRO''

Recuerde que el 3 es el color de la pluma (seleccionado con la anterior instrucción pen 3) y que el 16 es el color de la tinta con que la cargamos (rosado).
Cambiemos ahora de papel. Cuando lo hagamos, el anterior color de fondo no cambiará, porque ese color ha sido impreso con otro papel. Escriba lo siguiente:
paper 2 [INTROj
Consultando nuevamente las tablas 1 y 2, compruebe que el color inicialmente asignado al papel número 2 es cyan intenso. Cámbielo a negro escribiendo:
ink 2,0 rINTRO;
En este momento, en la pantalla tenemos caracteres escritos por las plumas 1 y 3, sobre fondos de papel números O y 2. También se puede cambiar el color de la tinta de una pluma o de un papel que no estén siendo utilizados. Por ejemplo, escriba la orden:
ink 1,2 »TROJ
que cambia el color de todos los caracteres que habíamos escrito antes con la pluma número 1. Escriba:
CIS 1INTR&
para borrar la pantalla.
El lector ya debería ser capaz de hacer que el ordenador vuelva a los colores iniciales (borde y fondo azul y caracteres amarillos) utilizando las instrucciones BORDER, PAPER, PEN e INK. Inténtelo. Si no lo consigue, reinicialice el ordenador con lcuaj [InnAyll [Escj.
Colores parpadeantes
Es posible hacer que una tinta cambie intermitentemente de color. Para ello se debe añadir otro número a la instrucción INK que asigna tintas a la pluma utilizada.
Vamos a hacer que los caracteres que escribamos alternen entre los colores blanco intenso y rojo intenso. Reinicialice la máquina con kTRI=1 LPAAY [ESt1 y escriba lo siguiente:
ink 1,26,6 liN-rRól
En este caso el 1 es el número de la pluma, el 26 es el del color blanco intenso y el 6 es el del segundo color, rojo intenso.
El mismo efecto de parpadeo se puede dar a los colores del fondo, para lo cual se añade un segundo número de color a la instrucción INK que asigna tintas al papel actual. Para hacer que el color del fondo alterne entre verde y amarillo intenso escriba:
ink 0,9,24 [INTRO1

En este caso O es el número del papel, 9 es el número del color verde y 24 es el número del segundo color, el amarillo intenso.
Reinicialice el ordenador con 1CTLR 1 1 MAYS 1 1 ESC1

Observe en la tabla 2 que en modo O hay dos números de pluma y dos números de 
papel, el 14 y el 15, que tienen asignadas tintas parpadeantes. Es decir, sus 
correspondientes tintas están preprogramadas con un color adicional.

Escriba lo siguiente:

mode O 1INTRO 1 pen 15 IINTRO 1

y verá en la pantalla la palabra Ready parpadeando entre azul celeste y rosado. Escriba ahora:

paper 14 INTRO1 cls

El texto continúa parpadeando como antes, pero además el fondo ha empezado a 
alternar entre los colores amarillo y azul.

Los números de pluma y de papel 14 y 15 pueden ser reprogramados, mediante la 
adecuada instrucción INK, para que parpadeen con otras tintas o bien para 
asignarles un color fijo.

Finalmente, se puede hacer parpadear el borde sin más que especificar un 
segundo número de color en la instrucción BORDER. Escriba:

border 6,9 i INTRO1

El borde está parpadeando entre los colores rojo intenso y verde. Observe que 
al borde se le puede asignar uno o dos colores cualesquiera de los 27 
disponibles, independientemente del modo en que esté la pantalla (0, 1 o 2).

Reinicialice el ordenador con ICTRL1 1MAYS 1 1 ESC1

Introduzca y ejecute el siguiente programa, que demuestra los colores disponibles.

10 MODE O FikTn0-1
20 velocidad=600: REM establece velocidad del
30 FOR b=0 TO 26 irsi-Ftól
40 LOCATE 1,12 IINTRO1
50 BORDER b 1INTRO
60 PRINT "color del bordenb 1 INTROj 70 FOR t=1 TO velocidad 1 INTRO 1 80 NEXT t,b I INTRO 1
90 CLG LINTRO 1
100 FOR p=0 TO 15 1INTROi
110 PAPER p 1 INTRO 1
120 PRINT "papel:";p [INTROj
130 FOR n=0 TO 15 WNTRol 140 PEN n FINTRC
150 PRINT "pluma:";n INTRO1
160 NEXT n INTRO
170 FOR t=1 TO velocidad*2 INTRO 180 NEXT t,p 	
190 MODE 1 1~ 
200 BORDER 1 INTRO1 210 PAPER O V^fl-R01 220 PEN 1 FINTROj
230 INK 0,1 ijNTRO
240 INK 1,24 [INTRe0 run INTRO I1

OBSERVACIÓN MUY IMPORTANTE

En este programa, así como en otros capítulos y listados de este manual, las 
palabras clave de BASIC aparecen en mayúsculas, pues el ordenador convierte 
automáticamente minúsculas a mayúsculas cuando se le pide que haga un listado 
del programa (con LIST). En general, es preferible escribir las instrucciones 
en minúsculas; esto ayudará más tarde a detectar errores, ya que las palabras 
clave de BASIC que contengan algún error no serán convertidas a mayúsculas.

En lo que resta de este 'Curso de introducción' daremos los listados 
indistintamente en mayúsculas y minúsculas, para que usted se familiarice con 
esta característica de BASIC.

Los nombres de las variables, tales como x o a$, no son convertidos a 
mayúsculas al listar el programa. Sin embargo, el ordenador reconoce las 
variables tanto si están en mayúsculas como si están en minúsculas; de hecho, 
para el ordenador x es la misma variable que X.
 
  
Atención

A partir de ahora no vamos a seguir recordándole que debe pulsar [TRJ al 
terminar de escribir cada línea de programa y cada orden directa, pues 
suponemos que usted ya está suficientemente habituado a hacerlo.


### Gráficos

En la memoria del ordenador está pregrabado el diseño de cierto número de caracteres. Para escribirlos en la pantalla necesitamos la palabra clave:

chr$1
Dentro de los paréntesis se pone el número del carácter, que debe estar en el margen de 32
a 255.

Reinicialice el ordenador conTkr_j MAYS]	y escriba lo siguiente:

print chr$1250)
No olvide pulsar [INTRO]. En la pantalla ha aparecido el carácter número 250, que es la figura de un hombre caminando hacia la derecha.
Para ver todos los caracteres y símbolos, junto con su número correspondiente, introduzca
y ejecute el siguiente programa (recuerde que debe pulsar INTRO1 al final de cada línea):

10 for n=32 to 255
20 print n;chr$(n);
30 next n
run
 Todos estos caracteres y números figuran en el capítulo 'Para su referencia ...


LOCATE
Esta instrucción sirve para colocar el cursor en un lugar especificado de la pantalla. A menos que se lo mueva con una instrucción LOCATE, el punto de partida del cursor es el extre-
mo superior izquierdo de la pantalla, punto de coordenadas 1,1 (en el sistema de coordena-
das x, y, donde x es la posición horizontal e y es la vertical). En modo 1 hay 40 columnas y 25 filas (o líneas). Así, para colocar el cursor en el centro de la primera línea, tendremos
que utilizar 20,1 como coordenadas x, y.
Teclee lo siguiente (sin olvidar pulsar 1INTRO] al final de cada línea):
mode 1 ... borra la pantalla y lleva el cursor al extremo superior izquierdo 
10 locate 20,1
20 print chr$1250) run

Para comprobar que el carácter está en la primera línea, cambiemos el color del borde:	ei
border O	ei
ei
El borde es ahora negro y podemos ver que el hombrecillo está en el centro de la línea
superior.	ei
En modo O sólo hay 20 columnas, pero las mismas 25 líneas. Si ahora escribe:	
mode O	
run	
ei verá que el hombre se ha ido al extremo superior derecho de la pantalla. Esto ha ocurrido
porque la coordenada x= 20 es la última columna en modo 0. Escriba:	ei
mode 2	
run	ei
Vuelva a modo 1 con:	ei
mode 1	ei
Ahora pruebe usted con diferentes posiciones en locate y diferentes números en chr$1 I.	
Por ejemplo, escriba:	ei
locate 20,12:print chr$1240)	ei

y verá una flecha en el centro de la pantalla. Observe que en esta instrucción:
  
Para mover el carácter 250 de izquierda a derecha de la pantalla, escriba lo siguiente:	ei
ei

ei
Pulse	dos veces para abandonar el programa.
1	ESC 1	e I
al
ii

20 es la coordenada x (horizontal) (margen: 1 a 40) 12 es la coordenada y (vertical) (margen: 1 a 25) 240 es el número del carácter (margen: 32 a 255)
10 CLS
20 FOR x=1 TO 39 30 LOCATE x,20
50 PRINT CHR$1250) 60 NEXT x
70 GOTO 10
run
Si queremos borrar el carácter recién escrito antes de escribir el siguiente, debemos hacer
50 print " ";chr$1250)



(Esta nueva línea 50 reemplaza automáticamente la que teníamos antes.) Escriba:
run
Para mejorar la ilusión de movimiento del carácter por la pantalla, añada al programa anterior la siguiente línea:
40 call &bd19
Este programa se puede mejorar introduciendo pausas y utilizando un símbolo distinto para el retroceso.

Escriba:
Iist
y añada las siguientes líneas:
70 FOR n=1 TO 300:NEXT n 80 FOR x=39 TO 1 STEP —1 90 LOCATE x,20
100 FRAME
110 PRINT CHR$12511;" 120 NEXT x
130 FOR n=1 TO 300:NEXT n 140 GOTO 20
run

#### PLOT

La instrucción PLOT es análoga a LOCATE, pero controla la posición del cursor gráfico y utiliza un sistema de coordenadas distinto, en el que las distancias se miden en pixels (un pixel, o punto gráfico, es la mínima área de la pantalla controlable individualmente).

El cursor gráfico es invisible, y distinto en todos los aspectos del cursor de texto.

La pantalla se divide en 640 puntos en horizontal por 400 en vertical. Las coordenadas x, y se toman con respecto al extremo inferior izquierdo de la pantalla, que es el punto de coordenadas O, O. A diferencia de lo que ocurría con LOCATE, las coordenadas de este sistema no dependen del modo de pantalla (0, 1 o 2).

Para comprobarlo, reinicialice la máquina con ICTRLI LMAYS] [ESC1 y escriba:

plot 320,200

Observe el punto que ha aparecido en el centro de la pantalla.


Hagamos lo mismo en modo O:

mode 0 plot 320,200

El punto sigue estando en el centro de la pantalla, pero es más grande. Para ver el efecto en modo 2 escriba:

mode 2 plot 320,200

Como era de esperar, el punto sigue centrado, pero es mucho más pequeño.

Dibuje unos cuantos puntos en diversos lugares de la pantalla y en modos distintos para familiarizarse con esta instrucción. Cuando haya terminado, escriba:

mode 1

para volver a modo 1 y borrar la pantalla.

DRAW

Reinicialice la máquina con [TRI..] 1MAY [ESC]. La instrucción DRAW dibuja una recta a partir de la posición actual del cursor gráfico. Para verla en acción, dibuje un rectángulo con el siguiente programa:

5 cls
10 plot 10,10 20 draw 10,390 30 draw 630,390 40 draw 630,10 50 draw 10,10 60 goto 60

run

En la línea 10 la instrucción PLOT coloca el cursor en el punto de partida deseado. A continuación, las instrucciones DRAW van dibujando segmentos de recta: hacia arriba, hacia la derecha, etc.

Pulse 1 ESC I dos veces para abandonar el programa.

(Observe la línea 60 de este programa. Esta línea establece un bucle infinito, del que sólo se sale deteniendo el programa. Una instrucción de este tipo es útil cuando se quiere evitar que el ordenador exhiba el mensaje Ready al terminar el programa.)


Añada al programa las siguientes líneas, las cuales dibujan un segundo rectángulo dentro
del anterior:

60 plot 20,20
70 draw 20,380 ell
80 draw 620,380
90 draw 620,20 100 draw 20,20
110 goto 110
run
Pulse rEscl dos veces para detener el programa.

MOVE

Esta instrucción funciona igual que PLOT en cuanto a llevar el cursor gráfico a 
la posición O especificada, pero no dibuja el punto.

Escriba:
cis
move 639,399

O		Aunque no podamos verlo, hemos llevado el cursor al extremo superior derecho de la pantalla.
IIIII
Para demostrarlo, vamos a dibujar una recta desde ese punto hasta el centro de la pantalla.
Escriba:
ell	draw 320,200

o
### Circunferencias

ell	Las circunferencias se pueden dibujar punto a punto o con trazo continuo. Una forma de
dibujar una circunferencia consiste en dibujar puntos en las posiciones correctas. En la figura siguiente se ilustra cómo se calculan las coordenadas x, y de un punto p de la circunfe-
rencia. Las fórmulas son:
x=190*cos(a) O	y=190*sin(a)


x
320 
-
Dibujo de una circunferencia
En los programas anteriores hemos referido todos los dibujos al extremo inferior izquierdo de la pantalla. Si queremos que nuestra circunferencia quede centrada en la pantalla, debemos situar su centro en el punto de coordenadas 320,200, y luego sumar a estos valores los dados por las fórmulas anteriores.
El siguiente programa dibuja punto a punto una circunferencia:
new
10 CLS
20 DEG
30 FOR a=1 TO 360
40 MOVE 320,200
50 PLOT 320+190*COS(a),200+190*SIN(a) 60 NEXT
run

Observe que hemos dado la orden NEW antes de introducir el programa. Esta orden hace que el ordenador borre el programa que en ese momento tenga en la memoria (de forma similar a lo que ocurre cuando se pulsa CTRL MAYSI LESCI). Sin embargo, la pantalla no se borra.

El radio de la circunferencia se puede reducir poniendo en lugar de 190 un número menor de pixels.

Para ver el efecto de dibujar la circunferencia de otra forma (en radianes), borre la línea 20 escribiendo:

20


### BORDE DE LA PANTALLA


En lugar de punto a punto, podemos dibujar la circunferencia con trazo 
continuo. Modifique la línea 50 para poner draw en lugar de plot. La línea será 
entonces: 50 draw 320+190*cos(a),200+190*sin(a) Pruebe esta modificación con la 
línea 20 y sin ella.

Observe que en la línea 60 de este programa hemos puesto NEXT en lugar de NEXT 
a. En efecto, se puede omitir el nombre de la variable, pues el ordenador se 
encarga de averiguar a qué FOR corresponde cada NEXT. No obstante, en los 
programas en los que haya muchos bucles FOR ... NEXT, puede ser conveniente 
poner los nombres de las variables después de NEXT para que el programa sea más 
inteligible cuando se lo esté corrigiendo o estudiando.

### ORIGIN

En el programa anterior utilizábamos la instrucción MOVE para establecer el 
centro de la circunferencia y luego sumábamos a las coordenadas del centro las 
coordenadas de los puntos de la circunferencia. Podemos evitar esas sumas si 
redefinimos la posición del origen de coordenadas con la instrucción ORIGIN. El 
ordenador entenderá las coordenadas que se le suministren a continuación como 
referidas al nuevo origen. Escriba lo siguiente:

new
10 cls
20 for a=1 to 360 
30 origin 320,200
40 plot 190*cos(a),190*sin(a)
50 next
run

411	El siguiente programa dibuja cuatro circunferencias más pequeñas:

new
10 CLS
20 FOR a=1 TO 360
30 ORIGIN 196,282 40 PLOT 50*COS(a),50*SIN(a)
50 ORIGIN 442,282 60 PLOT 50*COS(a),50*SIN(a)
ili	70 ORIGIN 196,116
80 PLOT 50*COS(a),50*SIN(a)
90 ORIGIN 442,116
100 PLOT 50*COS(a),50*SIN(a)
110 NEXT
run


Otra forma de dibujar la circunferencia (con trazo continuo) es la siguiente:

new
10 MODE 1
20 ORIGIN 320,200
30 DEG
40 MOVE 0,190
50 FOR a=0 TO 360 STEP 10
60 DRAW 190*SIN(a),190*COS(a) 70 NEXT
run

En este caso se van dibujando pequeños segmentos de recta, de un punto al siguiente de la circunferencia. Este método es mucho más rápido que el de dibujo punto a punto.

Observe una vez más el efecto de la instrucción DEG: suprima la línea 30 y ejecute el programa.

Un ejemplo ...

Para concluir esta sección, le ofrecemos un programa de demostración de gráficos que incorpora muchas instrucciones que el lector ya debería entender.

10 MODE 1:BORDER 0:DEG 20 PRINT "Por favor, espere" 30 FOR n=1 to 3
40 INK 0,0:INK 1,26:INK 2,6:INK 3,18
50 IF n=1 THEN sa=120 60 IF n=2 THEN sa=135 70 IF n=3 THEN sa=150
80 IF n=1 THEN ORIGIN 0,-50,0,640,0,400 ELSE ORIGIN 0,0,0,640,0,400
90 DIM cx(5),cy(5),r(5),Ic(5) 100 DIM np(5)
110 DIM px%15,811,py%15,81)
120 st=1:cx(1)=320:cy(1)=200:r(1)=80
130 FOR st=1 TO 4
140 r(st+1)=r(st)/2
150 NEXT st
160 FOR st=1 TO 5
170 IcIst)=0:np(st)=0 180 np(st)=np(st)+1
190 px°70(st,np(st)1=r(st)*SIN(IcIst))
200 pycYo(st,np(st))=r(st)*COS(Ic(st))
210 Ic(st)=Ic(st)+360/r(st)
220 IF Ic(st)<360 THEN 180
230 px%(st,np(st)+1)=px%(st,1)
240 py°/0(st,np(st)+1)=py%(st,1)
250 NEXT st
260 CLS:cj= REMAIN(1):cj= REMAIN(2)
270 cj=REMAIN(3):INK 1,2:st=1
280 GOSUB 350
290 LOCATE 1,1
300 EVERY 25,1 GOSUB 510
310 EVERY 15,2 GOSUB 550
320 EVERY 5,3 GOSUB 590
330 ERASE cx,cy,r,Ic,np,px%,py%:NEXT
340 GOTO 340
350 cx%=cx(st):cy%=cy(st):Ic(st)=0
360 FOR x%=1 TO np(st)
370 MOVE cx%,cy%
380 DRAW cx%+px%(st,x%),cy%+py%(st,x%),1+(st MOD 3)
390 DRAW cx%+px°/0(st,x%+1),cy°/o+py%(st,x%+1),1+(st MOD 3)
400 NEXT x%
410 IF st=5 THEN RETURN
420 Ic(st)=0
430 cx(st+1)=cx(st)+1.5*r(st)*SIN(sa+lc(st))
440 cy(st+1)=cy(st)+1.5*r(st)*COS(sa+lc(st))
450 st=st+1 460 GOSUB 350
470 st=st-1
480 Ic(st)=Ic(st)+2*sa
490 IF (Ic(st) MOD 360)<>0 THEN 430
500 RETURN
510 ik(1)=1+RND*25
520 IF ik(1-=ik(2) OR ik(1)=ik(3) THEN 510
530 INK 1,ik(1)
540 RETURN
550 ik(2)=1+RND*25
560 IF ik(2)=ik(1) OR ik(2)=ik(3) THEN 550
570 INK 2,ik(2) 580 RETURN
590 ik(3)=1+RND*25
600 IF ik(3)=ik(1) OR ik(3)=ik(2) THEN 590
610 INK 3,ik(3) 620 RETURN


## Parte 8: Sonidos

El ordenador emite su sonido a través del altavoz que tiene incorporado. Si 
está utilizando la unidad modulador/fuente de alimentación MP1 y un televisor 
doméstico, baje el mando de volumen del televisor al mínimo.

El nivel de sonido se ajusta con el mando VOLUMEN que hay en el panel derecho 
del ordenador. También es posible enviar el sonido a un amplificador externo, 
por medio de la salida marcada con E/S en el ordenador. De esta forma se puede 
oír el sonido en estereofonía, utilizando los altavoces o los auriculares de un 
equipo de alta fidelidad. En la parte 2 de este 'Curso de introducción' se 
explica cómo tomar las señales de la salida E/S del ordenador.

### La instrucción SOUND

La instrucción SOUND tiene siete parámetros. Los dos primeros son 
imprescindibles, mientras que los restantes son opcionales. La forma de la 
instrucción es la siguiente:

SOUND (situación de canales>,(periodo de tono),(duración),(volumen>, (envolvente de volumen),(envolvente de tono),(periodo de ruido)

Parece complicada a primera vista, pero veremos que en realidad no lo es tanto 
cuando hayamos analizado el significado de todos los parámetros. Así pues, 
estudiemos los parámetros uno por uno.

#### Situación de los canales

Para no complicar las cosas, por ahora nos limitaremos a considerar este 
parámetro como simple selector de canales. Hay tres canales de sonido; de 
momento sólo utilizaremos el número 1.

#### Periodo de tono

El periodo de tono es la forma técnica de especificar el tono del sonido; en 
otras palabras, de identificar la nota (DO, RE, MI, FA, etc.). Cada nota tiene 
un número de identificación, que es el periodo de tono. Si consulta el capítulo 
'Para su referencia ... ', comprobará que la nota DO media tiene un periodo de 
tono de 478.


Reinicialice el ordenador con LCTRLJ	IESC1 y luego escriba:

10 sound 1,478 run

Acaba de oír la nota DO media, que ha sonado durante 0.2 segundos.

¿No ha oído nada? Suba el control de volumen del ordenador y vuelva a ejecutar el programa.

#### Duración

Este parámetro especifica la duración del sonido. Las unidades son de 
centésimas de segundo (0.01 s). Si no se especifica duración, el ordenador toma 
el valor implícito para este parámetro, que es 20; por eso la nota que acaba de 
oír ha durado 0.01 x 20 = 0.2 segundos.

Si queremos que la nota dure 1 segundo, el valor del parámetro tendrá que ser 
100; para dos segundos, 200; etc. Escriba lo siguiente:

10 sound 1,478,200 
run

Acaba de oír la nota DO media con duración de 2 segundos.

#### Volumen

Este parámetro especifica el volumen de la nota. El margen de valores va de O a 15. El 'volumen' O es el mínimo; el 15 es el máximo. Si no se especifica ningún valor, el ordenador toma el implícito, que es 12. Escriba lo siguiente:

10 sound 1,478,200,5 
run

Fíjese en el volumen de este sonido y compárelo con el siguiente:

10 sound 1,478,200,15 
run

Como puede observar, es mucho más intenso que el anterior.

#### Envolvente de volumen

Se puede hacer que el volumen de una nota no sea constante, sino que varíe con 
el tiempo mientras la nota está sonando. Para especificar la forma de variación 
del volumen en función del tiempo necesitamos otra instrucción: ENV. De hecho, 
podemos definir varias envolventes de volumen distintas, cada una de las cuales 
tendrá su número de referencia. Así, si hemos definido la envolvente de volumen 
número 1, podemos utilizarla poniendo en la	 instrucción SOUND el número 1 como 
parámetro de envolvente de volumen. En seguida explicaremos cómo se definen las 
envolventes de volumen.	

#### Envolvente de tono

Se puede hacer que el tono de una nota no sea constante, sino que varíe con el 
tiempo mientras la nota está sonando. Para especificar la forma de variación 
del tono en función del	 tiempo necesitamos otra instrucción: ENT. De hecho, 
podemos definir varias envolventes de tono distintas, cada una de las cuales 
tendrá su número de referencia. Así, si hemos definido la envolvente de tono 
número 1, podemos utilizarla poniendo en la instrucción SOUND el número 1 como 
parámetro de envolvente de tono. En seguida explicaremos cómo se definen las 
envolventes de tono.	

#### Ruido

El periodo de ruido es el último parámetro de la instrucción SOUND. Las 
características	 del ruido se pueden variar eligiendo para este parámetro un 
valor comprendido entre 1 y 31. 

Ponga el valor 2 en la instrucción SOUND y escuche el efecto. Ponga luego el número
27 y observe la diferencia. Escriba:

10 sound 1,478,200,15,,,2	41/
En esta instrucción hemos dejado en blanco dos parámetros (,„) porque aún no hemos crea-	
do ninguna envolvente de volumen ni de tono.	

### Definición de una envolvente de volumen	

La instrucción que define envolventes de volumen es ENV. En su versión más sencilla, esta	
instrucción lleva 4 parámetros. Su forma es la siguiente:

ENV <número de envolventeMnúmero de escalonesMaltura de cada escalón),	IID <duración de cada escalón)

Estudiemos los parámetros uno por uno.

#### Número de la envolvente

Es el número de referencia (entre 0 y 15) por el que la citaremos en la instrucción SOUND.
 
      
#### Número de escalones 

Este parámetro especifica en cuántas etapas queremos que la nota evolucione 
antes de terminar. Por ejemplo, si la nota ha de durar 10 segundos, podemos 
dividirla en 10 etapas de 1 segundo cada una; en tal caso, el parámetro 'número 
de escalones' tendría el valor 10. El margen de este parámetro es de O a 127. 
Altura de cada escalón En cada etapa, el volumen puede variar con respecto al 
nivel anterior en un número de unidades comprendido en O y 15. Estos 16 niveles 
de sonido son los mismos que se definen en la instrucción SOUND. Sin embargo, 
el margen del parámetro 'altura de escalón' es de —128 a +127; el nivel del 
volumen vuelve a O cada vez que sobrepasa el 15.

#### Duración de cada escalón

Este parámetro especifica la duración de cada escalón en unidades de centésimas 
de segundo. El margen de valores es de O a 255; esto significa que la duración 
máxima de cada escalón es de 2.56 segundos (el O se considera como 256).

Por consiguiente, el producto del parámetro 'número de escalones' por el 
parámetro 'duración de cada escalón' no debería ser mayor que el parámetro 
'duración' especificado en la instrucción SOUND. De lo contrario, el sonido 
terminará antes de que se hayan completado todos los escalones de la 
envolvente. (En ese caso el ordenador ignora el resto del contenido de la 
envolvente.)

Análogamente, si la duración especificada en SOUND es mayor que la impuesta por 
el producto de 'número de escalones' por 'duración de cada escalón', la nota 
continuará sonando aunque se hayan terminado los escalones de la envolvente de 
volumen, y lo hará al nivel del último escalón de la envolvente.

Para practicar con las envolventes de volumen, pruebe el siguiente programa:

10 env 1,10,1,100
20 sound 1,284,1000,1,1 run

La línea 20 especifica un sonido con número de tono igual a 284 (LA 
internacional), duración de 10 segundos, volumen inicial igual a 1 y envolvente 
de tono número 1, la cual consiste en 10 escalones de altura 1 y duración 1 
segundo (100 x 0.01).

Pruebe las siguientes formas de la línea 10 y trate de escuchar el efecto de 
las diferentes envolventes de volumen:

10 env 1,100,1,10 
10 env 1,100,2,10
10 env 1,100,4,10
10 env 1,50,20,20 
10 env 1,50,2,20 10 env 1,50,15,30

Finalmente, pruebe la siguiente:

10 env 1,50,2,10

Observe que el volumen permanece constante durante la segunda mitad de la nota. Esto ocurre por que el número de escalones es 50 y la duración de cada uno de ellos es 0.1 s, con lo que la duración total de la envolvente es de solamente 5 segundos, mientras que en la instrucción SOUND se especifica una duración de 10 segundos.
Haga usted otras pruebas y trate de generar sonidos diferentes.
Si quiere crear envolventes más complejas, puede repetir los tres últimos parámetros de la instrucción ENV para definir otras 'secciones' de la envolvente (hasta un máximo de 4 secciones).

Definición de una envolvente de tono

La instrucción que define envolventes de tono es ENT. En su versión más sencilla, esta instrucción lleva 4 parámetros. Su forma es la siguiente:
ENT (número de envolvente),(número de escalones),(altura de cada escalón), (duración de cada escalón)
Como siempre, estudiemos los parámetros uno por uno.

#### Número de la envolvente

Es el número de referencia (entre O y 15) por el que la citaremos en la 
instrucción SOUND.

#### Número de escalones

Este parámetro especifica en cuántas etapas queremos que la nota evolucione 
antes de terminar. Por ejemplo, si la nota ha de durar 10 segundos, podemos 
dividirla en 10 etapas de 1 segundo cada una; en tal caso, el parámetro 'número 
de escalones' tendría el valor 10.

El margen de este parámetro es de O a 239.

#### Periodo de tono de cada escalón

En cada etapa, el tono puede variar con respecto al de la anterior en un número 
de unidades comprendido entre —128 y +127. Las variaciones negativas 
representan aumento del tono (tono más agudo); las variaciones positivas 
reducen el tono (tono más grave). El valor mínimo del período de tono es 0. 
Téngalo en cuenta cuando programe envolventes de tono. En el capítulo 'Para su 
referencia ... ' se da la lista completa de los periodos de tono.

Duración de cada escalón

Este parámetro especifica la duración de cada escalón en unidades de centésimas 
de segundo. El margen de valores es de O a 255; esto significa que la duración 
máxima de cada escalón es de 2.56 segundos (el O se considera como 256).

Por consiguiente, el producto del parámetro 'número de escalones' por el 
parámetro 'duración de cada escalón' no debería ser mayor que el parámetro 
'duración' especificado en la instrucción SOUND. De lo contrario, el sonido 
terminará antes de que se hayan completado todos los escalones de la 
envolvente. (En ese caso el ordenador ignora el resto del contenido de la 
envolvente.)

Análogamente, si la duración especificada en SOUND es mayor que la impuesta por 
el producto de 'número de escalones' por 'duración de cada escalón', la nota 
continuará sonando aunque se hayan terminado los escalones de la envolvente de 
tono, y lo hará con el tono correspondiente al de la última etapa de la 
envolvente.

Para practicar con las envolventes de tono, pruebe el siguiente programa:

10 ent 1,100,2,2
20 sound 1,284,200,15„1
run

La línea 20 especifica un sonido con número de tono igual a 284 (LA internacional), duración de 2 segundos, volumen inicial igual a 15 (el máximo), sin envolvente de volumen (parámetro en blanco „) y con envolvente de tono número 1.

En la línea 10 se define la envolvente de tono, la cual consiste en 100 escalones de altura 2 (reducción del tono) y duración 0.02 segundos (2x0.01).

Pruebe las siguientes formas de la línea 10 y trate de escuchar el efecto de las diferentes
envolventes de tono:

10 ent 1,100,-2,2
10 ent 1,10,4,20
10 ent 1,10,-4,20


Cambie ahora la instrucción sound y la envolvente de tono escribiendo:

10 ent 1,2,17,70
20 sound 1,142,140,15„1 30 goto 10
run

Pulse [Esc] dos veces para detener el programa.

Se puede combinar las instrucciones ENV, ENT y SOUND para crear sonidos más complejos. Empiece con el siguiente programa:

10 env 1,100,1,3 20 ent 1,100,5,3
30 sound 1,284,300,1,1,1
run

Cambie la línea 20 por la siguiente:

20 ent 1,100,-2,3 run

Y finalmente pruebe el siguiente programa:

10 env 1,100,2,2
20 ent 1,100,-2,2
30 sound 1,284,200,1,1,1 run

Si quiere crear envolventes más complejas, puede repetir los tres últimos parámetros de la instrucción ENT para definir otras 'secciones' de la envolvente (hasta un máximo de 4 secciones).

Haga usted mismo otras pruebas. Por ejemplo, incluya ruido en la instrucción SOUND y añada más secciones a las envolventes de volumen y de tono.

En el capítulo 'Lista completa de las palabras clave del BASIC de AMSTRAD' explicaremos con todo detalle las diversas instrucciones de sonido. Si le interesan los aspectos más melódicos del sonido, consulte la sección 'El sonido de la música' del capítulo titulado `Cuando usted guste .


